!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(()=>(()=>{var t,e,r={49:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=r(625),a=r(779),c=r(850),u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l="plugin disabled",f="invalid context",h="not handled",p="unsupported command",d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bufferSize=e.bufferSize||256,this.handlers=e.handlers,this.helpfulStacks=!!e.helpfulStacks,this.hostHandlers=e.hostHandlers,this.local=e.local,this.noisy="boolean"!=typeof e.noisy||e.noisy,this.Promise=e.Promise||window.Promise,this.remote=e.remote,this.secret=e.secret,this.Sentry=e.Sentry,this.strict=!!e.strict,this.targetOrigin=e.targetOrigin,this._seed=t.randomId(16),this._ctr=0,this._pendingRequests={},this._messageQueues=new Map;try{this._messageQueues.set(this.remote,new a(this.bufferSize))}catch(t){this._targetsFallback={remote:this.remote}}this.listen()}var e,r,s;return e=t,r=[{key:"_handleMessage",value:function(t,e){var r=this,n=t.data;switch(t.type){case"request":this._handleRequest(n.id,n.command,n.args,e);break;case"response":this._handleResponse(n.to,n.success,n.response);break;case"bulk":n.forEach((function(t){return r._handleMessage(t,e)}))}}},{key:"listen",value:function(){var t=this;this.stop(),this.listener=function(e){var r=e.source;null!=e.data&&(r!==t.remote&&e.data.secret!==t.secret||t._handleMessage(e.data,r))},this.local.addEventListener("message",this.listener)}},{key:"stop",value:function(){this.local.removeEventListener("message",this.listener)}},{key:"_handleRequest",value:function(e,r,o,s){var a=this,u=c(this.hostHandlers,{PluginDisabled:t.PluginDisabled,InvalidContext:t.InvalidContext,NotHandled:t.NotHandled,command:r,args:o,source:s,request:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return a.request.apply(a,function(t){if(Array.isArray(t))return i(t)}(n=e.concat([s]))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var n},secret:this.secret});this.Promise.try((function(){if(!Object.prototype.hasOwnProperty.call(a.handlers,r))throw new t.UnsupportedCommand("unsupported command: ".concat(r));return a.handlers[r].apply(a,[u].concat(o))})).then((function(t){a.respond(e,!0,t,s)})).catch((function(t){a.Sentry&&t.code!==h?a.Sentry.withScope((function(e){if(e.setTag("command",r),o&&o[0]&&o[0].context){var i=o[0].context;e.setTag("idBoard",i.board),"object"===n(i.permissions)&&Object.keys(i.permissions).forEach((function(t){e.setExtra("".concat(t,"_permission"),i.permissions[t])}))}a.Sentry.captureException(t)})):a.noisy&&t.code!==h&&"function"==typeof console.warn&&(console.warn("Power-Up unhandled error responding to request for",r),console.warn(t)),a.respond(e,!1,{code:t.code,message:t.message},s)}))}},{key:"_handleResponse",value:function(e,r,n){if(!Object.prototype.hasOwnProperty.call(this._pendingRequests,e))return null;var o=this._pendingRequests[e];if(delete this._pendingRequests[e],r)return o.resolve(n);var i="".concat(n.message||""," (Command: ").concat(o.command,")");switch(n.code){case l:return o.reject(t.errorWithStack(t.PluginDisabled,i,o.stack));case f:return o.reject(t.errorWithStack(t.InvalidContext,i,o.stack));case h:return o.reject(t.errorWithStack(t.NotHandled,i,o.stack));case p:return o.reject(t.errorWithStack(t.UnsupportedCommand,i,o.stack));default:return o.reject(t.errorWithStack(Error,i,o.stack))}}},{key:"raw",value:function(e,r,n){var o=this;if("bulk"===e){var i={data:r,secret:this.secret,type:e};n&&n!==this.remote?n.postMessage(i,this.strict?this.targetOrigin:"*"):this.remote.postMessage(i,this.targetOrigin)}else{var s=n||this.remote;if(this._targetsFallback)if(n===this.remote)s="remote";else{s=void 0;for(var c=Object.keys(this._targetsFallback),u=0;u<c.length;u++){var l=c[u];if(this._targetsFallback[l]===n){s=l;break}}s||(s=t.randomId(8),this._targetsFallback[s]=n)}this._messageQueues.has(s)||this._messageQueues.set(s,new a(this.bufferSize));var f=this._messageQueues.get(s);f.isEmpty()&&setTimeout((function(){return o.emptyQueue(s)}),0),f.push({type:e,data:r})}}},{key:"emptyQueue",value:function(t){var e=this._messageQueues.get(t);if(!e.isEmpty()){var r=e.toArray();e.clear();var n="string"==typeof t?this._targetsFallback[t]:t;t!==this.remote&&"remote"!==t&&(this._messageQueues.delete(t),this._targetsFallback&&delete this._targetsFallback[t]),this.raw("bulk",r,n)}}},{key:"request",value:function(t){var e=this;this._ctr+=1;for(var r=this._seed+this._ctr,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var s,a=o[o.length-1];a&&"function"==typeof a.postMessage&&(s=o.pop());var c={args:o,command:t,id:r};return this.helpfulStacks&&(c.stack=(new Error).stack),this.raw("request",{args:o,command:t,id:r},s),new this.Promise((function(t,n){c.resolve=t,c.reject=n,e._pendingRequests[r]=c}))}},{key:"respond",value:function(t,e,r,n){this.raw("response",{response:r,success:e,to:t},n)}}],s=[{key:"randomId",value:function(t){var e=t||16,r=[];if(window.crypto&&window.crypto.getRandomValues)r=window.crypto.getRandomValues(new Uint32Array(e));else if("object"===n(window.msCrypto)&&"function"==typeof window.msCrypto.getRandomValues)r=window.msCrypto.getRandomValues(new Uint32Array(e));else for(;r.length<e;)r.push(Math.floor(Math.random()*u.length));for(var o=[],i=0;i<e;i+=1)o.push(u[r[i]%u.length]);return o.join("")}},{key:"errorWithStack",value:function(t,e,r){var n=new t(e);return r&&(n.stack=r),n}}],r&&o(e.prototype,r),s&&o(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();d.PluginDisabled=s("PostMessageIO:PluginDisabled"),d.PluginDisabled.prototype.code=l,d.InvalidContext=s("PostMessageIO:InvalidContext"),d.InvalidContext.prototype.code=f,d.NotHandled=s("PostMessageIO:NotHandled"),d.NotHandled.prototype.code=h,d.UnsupportedCommand=s("PostMessageIO:UnsupportedCommand"),d.UnsupportedCommand.prototype.code=p,t.exports=d},611:()=>{var t;(t=window.Element.prototype).matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector,t.closest=t.closest||function(t){for(var e=this;e&&!e.matches(t);)e=e.parentElement;return e}},688:()=>{window.process={env:{_PACKAGE_NAME_:"trello-for-websites",_PACKAGE_VERSION_:"0.0.1"}}},423:function(t,e,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=void 0;var o=r(691);function i(t){if(void 0!==t)return"boolean"==typeof t?{capture:t}:t}e.bindAll=function(t,e,r){var s=e.map((function(e){var s=function(t,e){return null==e?t:n(n({},t),{options:n(n({},i(e)),i(t.options))})}(e,r);return(0,o.bind)(t,s)}));return function(){s.forEach((function(t){return t()}))}}},691:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bind=void 0,e.bind=function(t,e){var r=e.type,n=e.listener,o=e.options;return t.addEventListener(r,n,o),function(){t.removeEventListener(r,n,o)}}},197:(t,e,r)=>{"use strict";e.ak=void 0;var n=r(691);Object.defineProperty(e,"ak",{enumerable:!0,get:function(){return n.bind}});r(423)},21:(t,e,r)=>{var n;n=function(){return function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};e[s][0].call(l.exports,(function(t){return o(e[s][1][t]||t)}),l,l.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function r(t){var r=new e(t),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}t.any=function(t){return r(t)},t.prototype.any=function(){return r(this)}}},{}],2:[function(t,e,r){"use strict";var n;try{throw new Error}catch(t){n=t}var o=t("./schedule.js"),i=t("./queue.js"),s=t("./util.js");function a(){this._isTickUsed=!1,this._lateQueue=new i(16),this._normalQueue=new i(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o.isStatic?o(this.drainQueues):o}function c(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()}function u(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()}function l(t){this._normalQueue._pushOne(t),this._queueTick()}a.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},a.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},a.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},a.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},s.hasDevTools?(o.isStatic&&(o=function(t){setTimeout(t,0)}),a.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?c.call(this,t,e,r):this._schedule((function(){setTimeout((function(){t.call(e,r)}),100)}))},a.prototype.invoke=function(t,e,r){this._trampolineEnabled?u.call(this,t,e,r):this._schedule((function(){t.call(e,r)}))},a.prototype.settlePromises=function(t){this._trampolineEnabled?l.call(this,t):this._schedule((function(){t._settlePromises()}))}):(a.prototype.invokeLater=c,a.prototype.invoke=u,a.prototype.settlePromises=l),a.prototype.invokeFirst=function(t,e,r){this._normalQueue.unshift(t,e,r),this._queueTick()},a.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},a.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},e.exports=new a,e.exports.firstLineError=n},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=function(t,e){this._reject(e)},o=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},i=function(t,e){this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(n){var a=r(n),c=new t(e);c._propagateFrom(this,1);var u=this._target();if(c._setBoundTo(a),a instanceof t){var l={promiseRejectionQueued:!1,promise:c,target:u,bindingPromise:a};u._then(e,o,c._progress,c,l),a._then(i,s,c._progress,c,l)}else c._resolveCallback(u);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072==(131072&this._bitField)},t.bind=function(n,o){var i=r(n),s=new t(e);return s._setBoundTo(i),i instanceof t?i._then((function(){s._resolveCallback(o)}),s._reject,s._progress,s,null):s._resolveCallback(o),s}}},{}],4:[function(t,e,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var o=t("./promise.js")();o.noConflict=function(){try{Promise===o&&(Promise=n)}catch(t){}return o},e.exports=o},{"./promise.js":23}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}e.exports=function(e){var r=t("./util.js"),n=r.canEvaluate;function o(t){var n=function(t,n){var o;if(null!=t&&(o=t[n]),"function"!=typeof o){var i="Object "+r.classString(t)+" has no method '"+r.toString(n)+"'";throw new e.TypeError(i)}return o}(t,this.pop());return n.apply(t,this)}function i(t){return t[this]}function s(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}r.isIdentifier,e.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),n=1;n<e;++n)r[n-1]=arguments[n];return r.push(t),this._then(o,void 0,void 0,r,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=s;else if(n){var r=(void 0)(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./errors.js"),n=t("./async.js"),o=r.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable(),r._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new o),n.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()||(n.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0),this},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":2,"./errors.js":13}],7:[function(t,e,r){"use strict";e.exports=function(){var e,r=t("./async.js"),n=t("./util.js"),o=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,i=null,s=null,a=!1;function c(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);y(this,c),e>32&&this.uncycle()}function u(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],o=i.test(n)||"    (No stack trace)"===n,s=o&&f(n);o&&!s&&(a&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function l(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t.toString(),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}n.inherits(c,Error),c.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},n=0,o=this;void 0!==o;++n)e.push(o),o=o._parent;for(n=(t=this._length=n)-1;n>=0;--n){var i=e[n].stack;void 0===r[i]&&(r[i]=n)}for(n=0;n<t;++n){var s=r[e[n].stack];if(void 0!==s&&s!==n){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var a=n>0?e[n-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,u=n-2;u>=0;--u)e[u]._length=c,c++;return}}}},c.prototype.parent=function(){return this._parent},c.prototype.hasParent=function(){return void 0!==this._parent},c.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=c.parseStackAndMessage(t),r=e.message,o=[e.stack],i=this;void 0!==i;)o.push(u(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],o=e.length-1,i=e[o],s=-1,a=n.length-1;a>=0;--a)if(n[a]===i){s=a;break}for(a=s;a>=0;--a){var c=n[a];if(e[o]!==c)break;e.pop(),o--}e=n}}(o),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(o),n.notEnumerableProp(t,"stack",function(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}(r,o)),n.notEnumerableProp(t,"__stackCleaned__",!0)}},c.parseStackAndMessage=function(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||i.test(n))break}return r>0&&(e=e.slice(r)),e}(t):["    (No stack trace)"],{message:r,stack:u(e)}},c.formatAndLogError=function(t,r){if("undefined"!=typeof console){var n;if("object"==typeof t||"function"==typeof t){var o=t.stack;n=r+s(o,t)}else n=r+String(t);"function"==typeof e?e(n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}},c.unhandledRejection=function(t){c.formatAndLogError(t,"^--- With additional stack trace: ")},c.isSupported=function(){return"function"==typeof y},c.fireRejectionEvent=function(t,e,n,o){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(o):e(n,o))}catch(t){r.throwLater(t)}var s=!1;try{s=v(t,n,o)}catch(t){s=!0,r.throwLater(t)}var a=!1;if(d)try{a=d(t.toLowerCase(),{reason:n,promise:o})}catch(t){a=!0,r.throwLater(t)}s||i||a||"unhandledRejection"!==t||c.formatAndLogError(n,"Unhandled rejection ")};var f=function(){return!1},h=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function p(t){var e=t.match(h);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}c.setBounds=function(t,e){if(c.isSupported()){for(var r,n,i=t.stack.split("\n"),s=e.stack.split("\n"),a=-1,u=-1,l=0;l<i.length;++l)if(h=p(i[l])){r=h.fileName,a=h.line;break}for(l=0;l<s.length;++l){var h;if(h=p(s[l])){n=h.fileName,u=h.line;break}}a<0||u<0||!r||!n||r!==n||a>=u||(f=function(t){if(o.test(t))return!0;var e=p(t);return!!(e&&e.fileName===r&&a<=e.line&&e.line<=u)})}};var d,y=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():l(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,i=t,s=e;var r=Error.captureStackTrace;return f=function(t){return o.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,r(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n,c=new Error;if("string"==typeof c.stack&&c.stack.split("\n")[0].indexOf("stackDetection@")>=0)return i=/@/,s=e,a=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){n="stack"in t}return!("stack"in c)&&n&&"number"==typeof Error.stackTraceLimit?(i=t,s=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6}):(s=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?l(e):e.toString()},null)}(),v=function(){if(n.isNode)return function(t,e,r){return"rejectionHandled"===t?process.emit(t,r):process.emit(t,e,r)};var t=!1,e=!0;try{var r=new self.CustomEvent("test");t=r instanceof CustomEvent}catch(t){}if(!t)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(t){e=!1}e&&(d=function(e,r){var n;return t?n=new self.CustomEvent(e,{detail:r,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!0,r),!!n&&!self.dispatchEvent(n)});var i={};return i.unhandledRejection="onunhandledRejection".toLowerCase(),i.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,r){var n=i[t],o=self[n];return!!o&&("rejectionHandled"===t?o.call(self,r):o.call(self,e,r),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(e=function(t){console.warn(t)},n.isNode&&process.stderr.isTTY?e=function(t){process.stderr.write("[31m"+t+"[39m\n")}:n.isNode||"string"!=typeof(new Error).stack||(e=function(t){console.warn("%c"+t,"color: red")})),c}},{"./async.js":2,"./util.js":38}],8:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./util.js"),n=t("./errors.js"),o=r.tryCatch,i=r.errorObj,s=t("./es5.js").keys,a=n.TypeError;function c(t,e,r){this._instances=t,this._callback=e,this._promise=r}function u(t,e){var r={},n=o(t).call(r,e);return n===i?n:s(r).length?(i.e=new a("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),i):n}return c.prototype.doFilter=function(t){for(var r=this._callback,n=this._promise._boundValue(),s=0,a=this._instances.length;s<a;++s){var c=this._instances[s],l=c===Error||null!=c&&c.prototype instanceof Error;if(l&&t instanceof c)return(f=o(r).call(n,t))===i?(e.e=f.e,e):f;if("function"==typeof c&&!l){var f,h=u(c,t);if(h===i){t=i.e;break}if(h)return(f=o(r).call(n,t))===i?(e.e=f.e,e):f}}return e.e=t,e},c}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=[];function o(){this._trace=new e(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return o.prototype._pushContext=function(){r()&&void 0!==this._trace&&n.push(this._trace)},o.prototype._popContext=function(){r()&&void 0!==this._trace&&n.pop()},t.prototype._peekContext=i,t.prototype._pushContext=o.prototype._pushContext,t.prototype._popContext=o.prototype._popContext,function(){if(r())return new o}}},{}],10:[function(t,e,r){"use strict";e.exports=function(e,r){var n,o,i=e._getDomain,s=t("./async.js"),a=t("./errors.js").Warning,c=t("./util.js"),u=c.canAttachTrace,l=c.isNode&&(!!process.env.BLUEBIRD_DEBUG||!1);return c.isNode&&0==process.env.BLUEBIRD_DEBUG&&(l=!1),l&&s.disableTrampolineIfNecessary(),e.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},e.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},e.prototype._notifyUnhandledRejectionIsHandled=function(){r.fireRejectionEvent("rejectionHandled",n,void 0,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),r.fireRejectionEvent("unhandledRejection",o,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._captureStackTrace=function(){return l&&(this._trace=new r(this._peekContext())),this},e.prototype._attachExtraTrace=function(t,e){if(l&&u(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var o=r.parseStackAndMessage(t);c.notEnumerableProp(t,"stack",o.message+"\n"+o.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}},e.prototype._warn=function(t){var e=new a(t),n=this._peekContext();if(n)n.attachExtraTrace(e);else{var o=r.parseStackAndMessage(e);e.stack=o.message+"\n"+o.stack.join("\n")}r.formatAndLogError(e,"")},e.onPossiblyUnhandledRejection=function(t){var e=i();o="function"==typeof t?null===e?t:e.bind(t):void 0},e.onUnhandledRejectionHandled=function(t){var e=i();n="function"==typeof t?null===e?t:e.bind(t):void 0},e.longStackTraces=function(){if(s.haveItemsQueued()&&!1===l)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(l=r.isSupported())&&s.disableTrampolineIfNecessary()},e.hasLongStackTraces=function(){return l&&r.isSupported()},r.isSupported()||(e.longStackTraces=function(){},l=!1),function(){return l}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e,r){"use strict";var n=t("./util.js").isPrimitive;e.exports=function(t){var e=function(){return this},r=function(){throw this},o=function(){},i=function(){throw void 0},s=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype.return=t.prototype.thenReturn=function(r){return void 0===r?this.then(o):n(r)?this._then(s(r,2),void 0,void 0,void 0,void 0):(r instanceof t&&r._ignoreRejections(),this._then(e,void 0,void 0,r,void 0))},t.prototype.throw=t.prototype.thenThrow=function(t){return void 0===t?this.then(i):n(t)?this._then(s(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,n){return r(t,n,null,e)}}},{}],13:[function(t,e,r){"use strict";var n,o,i=t("./es5.js"),s=i.freeze,a=t("./util.js"),c=a.inherits,u=a.notEnumerableProp;function l(t,e){function r(n){if(!(this instanceof r))return new r(n);u(this,"message","string"==typeof n?n:e),u(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(r,Error),r}var f=l("Warning","warning"),h=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),d=l("AggregateError","aggregate error");try{n=TypeError,o=RangeError}catch(t){n=l("TypeError","type error"),o=l("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<y.length;++v)"function"==typeof Array.prototype[y[v]]&&(d.prototype[y[v]]=Array.prototype[y[v]]);i.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var _=0;function g(t){if(!(this instanceof g))return new g(t);u(this,"name","OperationalError"),u(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(u(this,"message",t.message),u(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var t=Array(4*_+1).join(" "),e="\n"+t+"AggregateError of:\n";_++,t=Array(4*_+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",o=n.split("\n"),i=0;i<o.length;++i)o[i]=t+o[i];e+=(n=o.join("\n"))+"\n"}return _--,e},c(g,Error);var m=Error.__BluebirdErrorTypes__;m||(m=s({CancellationError:h,TimeoutError:p,OperationalError:g,RejectionError:g,AggregateError:d}),u(Error,"__BluebirdErrorTypes__",m)),e.exports={Error,TypeError:n,RangeError:o,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:f}},{"./es5.js":14,"./util.js":38}],14:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var o={}.hasOwnProperty,i={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};e.exports={isArray:function(t){try{return"[object Array]"===i.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,r){return t[e]=r.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,o){return r(t,n,o,e)}}},{}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n){var o=t("./util.js"),i=o.isPrimitive,s=o.thrower;function a(){return this}function c(){throw this}function u(t,e,r){var n,o;return n=i(e)?r?(o=e,function(){return o}):function(t){return function(){throw t}}(e):r?a:c,t._then(n,s,void 0,e,void 0)}function l(t){var o=this.promise,i=this.handler,s=o._isBound()?i.call(o._boundValue()):i();if(void 0!==s){var a=n(s,o);if(a instanceof e)return u(a=a._target(),t,o.isFulfilled())}return o.isRejected()?(r.e=t,r):t}function f(t){var r=this.promise,o=this.handler,i=r._isBound()?o.call(r._boundValue(),t):o(t);if(void 0!==i){var s=n(i,r);if(s instanceof e)return u(s=s._target(),t,!0)}return t}e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?l:f,e?l:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,o){var i=t("./errors.js").TypeError,s=t("./util.js"),a=s.errorObj,c=s.tryCatch,u=[];function l(t,r,o,i){(this._promise=new e(n))._captureStackTrace(),this._stack=i,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(u):u}l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},l.prototype._continue=function(t){if(t===a)return this._promise._rejectCallback(t.e,!1,!0);var r=t.value;if(!0===t.done)this._promise._resolveCallback(r);else{var n=o(r,this._promise);if(!(n instanceof e)&&(n=function(t,r,n){for(var i=0;i<r.length;++i){n._pushContext();var s=c(r[i])(t);if(n._popContext(),s===a){n._pushContext();var u=e.reject(a.e);return n._popContext(),u}var l=o(s,n);if(l instanceof e)return l}return null}(n,this._yieldHandlers,this._promise),null===n))return void this._throw(new i("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));n._then(this._next,this._throw,void 0,this,null)}},l.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=c(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},l.prototype._next=function(t){this._promise._pushContext();var e=c(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new i("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(e).yieldHandler,n=l,o=(new Error).stack;return function(){var e=t.apply(this,arguments),i=new n(void 0,void 0,r,o);return i._generator=e,i._next(void 0),i.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");u.push(t)},e.spawn=function(t){if("function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=new l(t,this),o=n.promise();return n._run(e.spawn),o}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e,r){"use strict";e.exports=function(e,r,n,o){var i=t("./util.js");i.canEvaluate,i.tryCatch,i.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);for(var n=arguments.length,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i];t&&o.pop();var s=new r(o).promise();return void 0!==t?s.spread(t):s}}},{"./util.js":38}],19:[function(t,e,r){"use strict";e.exports=function(e,r,n,o,i){var s=e._getDomain,a=t("./async.js"),c=t("./util.js"),u=c.tryCatch,l=c.errorObj,f={},h=[];function p(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace();var o=s();this._callback=null===o?e:o.bind(e),this._preservedValues=n===i?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:h,a.invoke(d,this,void 0)}function d(){this._init$(void 0,-2)}function y(t,e,r,n){var o="object"==typeof r&&null!==r?r.concurrency:0;return new p(t,e,o="number"==typeof o&&isFinite(o)&&o>=1?o:0,n)}c.inherits(p,r),p.prototype._init=function(){},p.prototype._promiseFulfilled=function(t,r){var n=this._values,i=this.length(),s=this._preservedValues,a=this._limit;if(n[r]===f){if(n[r]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return n[r]=t,void this._queue.push(r);null!==s&&(s[r]=t);var c=this._callback,h=this._promise._boundValue();this._promise._pushContext();var p=u(c).call(h,t,r,i);if(this._promise._popContext(),p===l)return this._reject(p.e);var d=o(p,this._promise);if(d instanceof e){if((d=d._target())._isPending())return a>=1&&this._inFlight++,n[r]=f,d._proxyPromiseArray(this,r);if(!d._isFulfilled())return this._reject(d._reason());p=d._value()}n[r]=p}++this._totalResolved>=i&&(null!==s?this._filter(n,s):this._resolve(n))},p.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},p.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),o=0,i=0;i<r;++i)t[i]&&(n[o++]=e[i]);n.length=o,this._resolve(n)},p.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):y(this,t,e,null).promise()},e.map=function(t,e,r,o){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):y(t,e,r,o).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e,r){"use strict";e.exports=function(e,r,n,o){var i=t("./util.js"),s=i.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var o=s(t).apply(this,arguments);return n._popContext(),n._resolveFromSyncValue(o),n}},e.attempt=e.try=function(t,n,a){if("function"!=typeof t)return o("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var c=new e(r);c._captureStackTrace(),c._pushContext();var u=i.isArray(n)?s(t).apply(a,n):s(t).call(a,n);return c._popContext(),c._resolveFromSyncValue(u),c},e.prototype._resolveFromSyncValue=function(t){t===i.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./util.js"),n=t("./async.js"),o=r.tryCatch,i=r.errorObj;function s(t,e){if(!r.isArray(t))return a.call(this,t,e);var s=o(e).apply(this._boundValue(),[null].concat(t));s===i&&n.throwLater(s.e)}function a(t,e){var r=this._boundValue(),s=void 0===t?o(e).call(r,null):o(e).call(r,null,t);s===i&&n.throwLater(s.e)}function c(t,e){if(!t){var r=this._target()._getCarriedStackTrace();r.cause=t,t=r}var s=o(e).call(this._boundValue(),t);s===i&&n.throwLater(s.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var r=a;void 0!==e&&Object(e).spread&&(r=s),this._then(r,c,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util.js"),o=t("./async.js"),i=n.tryCatch,s=n.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var r=t.value,o=t.handler,a=t.promise,c=t.receiver,u=i(o).call(c,r);if(u===s){if(null!=u.e&&"StopProgressPropagation"!==u.e.name){var l=n.canAttachTrace(u.e)?u.e:new Error(n.toString(u.e));a._attachExtraTrace(l),a._progress(u.e)}}else u instanceof e?u._then(a._progress,null,null,a,void 0):a._progress(u)},e.prototype._progressUnchecked=function(t){for(var n=this._length(),i=this._progress,s=0;s<n;s++){var a=this._progressHandlerAt(s),c=this._promiseAt(s);if(c instanceof e)"function"==typeof a?o.invoke(this._doProgressWith,this,{handler:a,promise:c,receiver:this._receiverAt(s),value:t}):o.invoke(i,c,t);else{var u=this._receiverAt(s);"function"==typeof a?a.call(u,t,c):u instanceof r&&!u._isResolved()&&u._promiseProgressed(t,c)}}}}},{"./async.js":2,"./util.js":38}],23:[function(t,e,r){"use strict";e.exports=function(){var r,n=function(){return new l("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},o=function(){return new E.PromiseInspection(this._target())},i=function(t){return E.reject(new l(t))},s=t("./util.js");r=s.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},s.notEnumerableProp(E,"_getDomain",r);var a={},c=t("./async.js"),u=t("./errors.js"),l=E.TypeError=u.TypeError;E.RangeError=u.RangeError,E.CancellationError=u.CancellationError,E.TimeoutError=u.TimeoutError,E.OperationalError=u.OperationalError,E.RejectionError=u.OperationalError,E.AggregateError=u.AggregateError;var f=function(){},h={},p={e:null},d=t("./thenables.js")(E,f),y=t("./promise_array.js")(E,f,d,i),v=t("./captured_trace.js")(),_=t("./debuggability.js")(E,v),g=t("./context.js")(E,v,_),m=t("./catch_filter.js")(p),b=t("./promise_resolver.js"),w=b._nodebackForPromise,j=s.errorObj,k=s.tryCatch;function E(t){if("function"!=typeof t)throw new l("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==E)throw new l("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==f&&this._resolveFromResolver(t)}function C(t){var e=new E(f);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._progressHandler0=t,e._promise0=t,e._receiver0=t,e._settledValue=t}return E.prototype.toString=function(){return"[object Promise]"},E.prototype.caught=E.prototype.catch=function(t){var e=arguments.length;if(e>1){var r,n=new Array(e-1),o=0;for(r=0;r<e-1;++r){var i=arguments[r];if("function"!=typeof i)return E.reject(new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));n[o++]=i}n.length=o;var s=new m(n,t=arguments[r],this);return this._then(void 0,s.doFilter,void 0,s,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},E.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)},E.prototype.then=function(t,e,r){if(_()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+s.classString(t);arguments.length>1&&(n+=", "+s.classString(e)),this._warn(n)}return this._then(t,e,r,void 0,void 0)},E.prototype.done=function(t,e,r){this._then(t,e,r,void 0,void 0)._setIsFinal()},E.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,h,void 0)},E.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},E.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},E.prototype.all=function(){return new y(this).promise()},E.prototype.error=function(t){return this.caught(s.originatesFromRejection,t)},E.getNewLibraryCopy=e.exports,E.is=function(t){return t instanceof E},E.fromNode=function(t){var e=new E(f),r=k(t)(w(e));return r===j&&e._rejectCallback(r.e,!0,!0),e},E.all=function(t){return new y(t).promise()},E.defer=E.pending=function(){var t=new E(f);return new b(t)},E.cast=function(t){var e=d(t);if(!(e instanceof E)){var r=e;(e=new E(f))._fulfillUnchecked(r)}return e},E.resolve=E.fulfilled=E.cast,E.reject=E.rejected=function(t){var e=new E(f);return e._captureStackTrace(),e._rejectCallback(t,!0),e},E.setScheduler=function(t){if("function"!=typeof t)throw new l("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=c._schedule;return c._schedule=t,e},E.prototype._then=function(t,e,n,o,i){var s=void 0!==i,a=s?i:new E(f);s||(a._propagateFrom(this,5),a._captureStackTrace());var u=this._target();u!==this&&(void 0===o&&(o=this._boundTo),s||a._setIsMigrated());var l=u._addCallbacks(t,e,n,a,o,r());return u._isResolved()&&!u._isSettlePromisesQueued()&&c.invoke(u._settlePromiseAtPostResolution,u,l),a},E.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},E.prototype._length=function(){return 131071&this._bitField},E.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},E.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},E.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},E.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},E.prototype._setRejected=function(){this._bitField=134217728|this._bitField},E.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},E.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},E.prototype._isFinal=function(){return(33554432&this._bitField)>0},E.prototype._cancellable=function(){return(67108864&this._bitField)>0},E.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},E.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},E.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},E.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},E.prototype._isMigrated=function(){return(4194304&this._bitField)>0},E.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];if(e!==a)return void 0===e&&this._isBound()?this._boundValue():e},E.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},E.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},E.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},E.prototype._boundValue=function(){var t=this._boundTo;return void 0!==t&&t instanceof E?t.isFulfilled()?t.value():void 0:t},E.prototype._migrateCallbacks=function(t,e){var r=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),o=t._progressHandlerAt(e),i=t._promiseAt(e),s=t._receiverAt(e);i instanceof E&&i._setIsMigrated(),void 0===s&&(s=a),this._addCallbacks(r,n,o,i,s,null)},E.prototype._addCallbacks=function(t,e,r,n,o,i){var s=this._length();if(s>=131066&&(s=0,this._setLength(0)),0===s)this._promise0=n,void 0!==o&&(this._receiver0=o),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e)),"function"==typeof r&&(this._progressHandler0=null===i?r:i.bind(r));else{var a=5*s-5;this[a+3]=n,this[a+4]=o,"function"==typeof t&&(this[a+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[a+1]=null===i?e:i.bind(e)),"function"==typeof r&&(this[a+2]=null===i?r:i.bind(r))}return this._setLength(s+1),s},E.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},E.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},E.prototype._resolveCallback=function(t,e){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(n(),!1,!0);var r=d(t,this);if(!(r instanceof E))return this._fulfill(t);var o=1|(e?4:0);this._propagateFrom(r,o);var i=r._target();if(i._isPending()){for(var s=this._length(),a=0;a<s;++a)i._migrateCallbacks(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else i._isFulfilled()?this._fulfillUnchecked(i._value()):this._rejectUnchecked(i._reason(),i._getCarriedStackTrace())}},E.prototype._rejectCallback=function(t,e,r){r||s.markAsOriginatingFromRejection(t);var n=s.ensureErrorObject(t),o=n===t;this._attachExtraTrace(n,!!e&&o),this._reject(t,o?void 0:n)},E.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=k(t)((function(t){null!==e&&(e._resolveCallback(t),e=null)}),(function(t){null!==e&&(e._rejectCallback(t,r),e=null)}));r=!1,this._popContext(),void 0!==n&&n===j&&null!==e&&(e._rejectCallback(n.e,!0,!0),e=null)},E.prototype._settlePromiseFromHandler=function(t,e,r,o){var i;if(!o._isRejected())if(o._pushContext(),i=e!==h||this._isRejected()?k(t).call(e,r):k(t).apply(this._boundValue(),r),o._popContext(),i===j||i===o||i===p){var s=i===o?n():i.e;o._rejectCallback(s,!1,!0)}else o._resolveCallback(i)},E.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},E.prototype._followee=function(){return this._rejectionHandler0},E.prototype._setFollowee=function(t){this._rejectionHandler0=t},E.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},E.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},E.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},E.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},E.prototype._settlePromiseAt=function(t){var e=this._promiseAt(t),r=e instanceof E;if(r&&e._isMigrated())return e._unsetIsMigrated(),c.invoke(this._settlePromiseAt,this,t);var n=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,i=this._settledValue,s=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof n?r?this._settlePromiseFromHandler(n,s,i,e):n.call(s,i,e):s instanceof y?s._isResolved()||(this._isFulfilled()?s._promiseFulfilled(i,e):s._promiseRejected(i,e)):r&&(this._isFulfilled()?e._fulfill(i):e._reject(i,o)),t>=4&&4==(31&t)&&c.invokeLater(this._setLength,this,0)},E.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},E.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},E.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},E.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},E.prototype._queueSettlePromises=function(){c.settlePromises(this),this._setSettlePromisesQueued()},E.prototype._fulfillUnchecked=function(t){if(t===this){var e=n();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},E.prototype._rejectUncheckedCheckError=function(t){var e=s.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},E.prototype._rejectUnchecked=function(t,e){if(t===this){var r=n();return this._attachExtraTrace(r),this._rejectUnchecked(r)}this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?c.throwLater((function(t){throw"stack"in t&&c.invokeFirst(v.unhandledRejection,void 0,t),t}),void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled())},E.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},s.notEnumerableProp(E,"_makeSelfResolutionError",n),t("./progress.js")(E,y),t("./method.js")(E,f,d,i),t("./bind.js")(E,f,d),t("./finally.js")(E,p,d),t("./direct_resolve.js")(E),t("./synchronous_inspection.js")(E),t("./join.js")(E,y,d,f),E.version="2.11.0",E.Promise=E,t("./map.js")(E,y,i,d,f),t("./cancel.js")(E),t("./using.js")(E,i,d,g),t("./generators.js")(E,i,f,d),t("./nodeify.js")(E),t("./call_get.js")(E),t("./props.js")(E,y,d,i),t("./race.js")(E,f,d,i),t("./reduce.js")(E,y,i,d,f),t("./settle.js")(E,y),t("./some.js")(E,y,i),t("./promisify.js")(E,f),t("./any.js")(E),t("./each.js")(E,f),t("./timers.js")(E,f),t("./filter.js")(E,f),s.toFastProperties(E),s.toFastProperties(E.prototype),C({a:1}),C({b:2}),C({c:3}),C(1),C((function(){})),C(void 0),C(!1),C(new E(f)),v.setBounds(c.firstLineError,s.lastLineError),E}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e,r){"use strict";e.exports=function(e,r,n,o){var i=t("./util.js").isArray;function s(t){var n,o=this._promise=new e(r);t instanceof e&&(n=t,o._propagateFrom(n,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(r,s){var a=n(this._values,this._promise);if(a instanceof e){if(a=a._target(),this._values=a,!a._isFulfilled())return a._isPending()?void a._then(t,this._reject,void 0,this,s):void this._reject(a._reason());if(a=a._value(),!i(a)){var c=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(c)}}else if(!i(a))return void this._promise._reject(o("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0!==a.length){var u=this.getActualLength(a.length);this._length=u,this._values=this.shouldCopyValues()?new Array(u):this._values;for(var l=this._promise,f=0;f<u;++f){var h=this._isResolved(),p=n(a[f],l);p instanceof e?(p=p._target(),h?p._ignoreRejections():p._isPending()?p._proxyPromiseArray(this,f):p._isFulfilled()?this._promiseFulfilled(p._value(),f):this._promiseRejected(p._reason(),f)):h||this._promiseFulfilled(p,f)}}else-5===s?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{}}}(s))},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e,r){"use strict";var n,o=t("./util.js"),i=o.maybeWrapAsError,s=t("./errors.js"),a=s.TimeoutError,c=s.OperationalError,u=o.haveGetters,l=t("./es5.js"),f=/^(?:name|message|stack|cause)$/;function h(t){return function(e,r){if(null!==t){if(e){var n=function(t){var e;if(function(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}(t)){(e=new c(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var r=l.keys(t),n=0;n<r.length;++n){var i=r[n];f.test(i)||(e[i]=t[i])}return e}return o.markAsOriginatingFromRejection(t),t}(i(e));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var s=arguments.length,a=new Array(s-1),u=1;u<s;++u)a[u-1]=arguments[u];t._fulfill(a)}else t._fulfill(r);t=null}}}if(n=u?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=h(t),this.callback=this.asCallback},u){var p={get:function(){return h(this.promise)}};l.defineProperty(n.prototype,"asCallback",p),l.defineProperty(n.prototype,"callback",p)}n._nodebackForPromise=h,n.prototype.toString=function(){return"[object PromiseResolver]"},n.prototype.resolve=n.prototype.fulfill=function(t){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},n.prototype.reject=function(t){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},n.prototype.progress=function(t){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},n.prototype.cancel=function(t){this.promise.cancel(t)},n.prototype.timeout=function(){this.reject(new a("timeout"))},n.prototype.isResolved=function(){return this.promise.isResolved()},n.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=n},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e,r){"use strict";e.exports=function(e,r){var n={},o=t("./util.js"),i=t("./promise_resolver.js")._nodebackForPromise,s=o.withAppended,a=o.maybeWrapAsError,c=o.canEvaluate,u=t("./errors").TypeError,l={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(t){return o.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!f.test(t)}function d(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function y(t,e,r){var n=o.getDataPropertyOrDefault(t,e+r,l);return!!n&&d(n)}var v=function(t){return t.replace(/([$])/,"\\$")},_=c?void 0:function(t,c,u,l){var f=function(){return this}(),h=t;function p(){var o=c;c===n&&(o=this);var u=new e(r);u._captureStackTrace();var l="string"==typeof h&&this!==f?this[h]:t,p=i(u);try{l.apply(o,s(arguments,p))}catch(t){u._rejectCallback(a(t),!0,!0)}return u}return"string"==typeof h&&(t=l),o.notEnumerableProp(p,"__isPromisified__",!0),p};function g(t,e,r,i){for(var s=new RegExp(v(e)+"$"),a=function(t,e,r,n){for(var i=o.inheritedDataKeys(t),s=[],a=0;a<i.length;++a){var c=i[a],l=t[c],f=n===h||h(c,l,t);"function"!=typeof l||d(l)||y(t,c,e)||!n(c,l,t,f)||s.push(c,l)}return function(t,e,r){for(var n=0;n<t.length;n+=2){var o=t[n];if(r.test(o))for(var i=o.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===i)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}(s,e,r),s}(t,e,s,r),c=0,l=a.length;c<l;c+=2){var f=a[c],p=a[c+1],g=f+e;if(i===_)t[g]=_(f,n,f,p,e);else{var m=i(p,(function(){return _(f,n,f,p,e)}));o.notEnumerableProp(m,"__isPromisified__",!0),t[g]=m}}return o.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(d(t))return t;var r=function(t,e){return _(t,e,void 0,t)}(t,arguments.length<2?n:e);return o.copyDescriptors(t,r,p),r},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");var r=(e=Object(e)).suffix;"string"!=typeof r&&(r="Async");var n=e.filter;"function"!=typeof n&&(n=h);var i=e.promisifier;if("function"!=typeof i&&(i=_),!o.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var s=o.inheritedDataKeys(t),a=0;a<s.length;++a){var c=t[s[a]];"constructor"!==s[a]&&o.isClass(c)&&(g(c.prototype,r,n,i),g(c,r,n,i))}return g(t,r,n,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e,r){"use strict";e.exports=function(e,r,n,o){var i=t("./util.js"),s=i.isObject,a=t("./es5.js");function c(t){for(var e=a.keys(t),r=e.length,n=new Array(2*r),o=0;o<r;++o){var i=e[o];n[o]=t[i],n[o+r]=i}this.constructor$(n)}function u(t){var r,i=n(t);return s(i)?(r=i instanceof e?i._then(e.props,void 0,void 0,void 0,void 0):new c(i).promise(),i instanceof e&&r._propagateFrom(i,4),r):o("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}i.inherits(c,r),c.prototype._init=function(){this._init$(void 0,-3)},c.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){for(var r={},n=this.length(),o=0,i=this.length();o<i;++o)r[this._values[o+n]]=this._values[o];this._resolve(r)}},c.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return u(this)},e.props=function(t){return u(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e,r){"use strict";function n(t){this._capacity=t,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(t){return this._capacity<t},n.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},n.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=(this._front-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},n.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},n.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var o=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[o+0&i]=t,this[o+1&i]=e,this[o+2&i]=r,this._length=n},n.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,r,n,o){for(var i=0;i<o;++i)r[i+n]=t[i+0],t[i+0]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=n},{}],29:[function(t,e,r){"use strict";e.exports=function(e,r,n,o){var i=t("./util.js").isArray,s=function(t){return t.then((function(e){return a(e,t)}))};function a(t,a){var c=n(t);if(c instanceof e)return s(c);if(!i(t))return o("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var u=new e(r);void 0!==a&&u._propagateFrom(a,5);for(var l=u._fulfill,f=u._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(l,f,void 0,u,null)}return u}e.race=function(t){return a(t,void 0)},e.prototype.race=function(){return a(this,void 0)}}},{"./util.js":38}],30:[function(t,e,r){"use strict";e.exports=function(e,r,n,o,i){var s=e._getDomain,a=t("./async.js"),c=t("./util.js"),u=c.tryCatch,l=c.errorObj;function f(t,r,n,c){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=c===i?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var u=o(n,this._promise),l=!1,f=u instanceof e;f&&((u=u._target())._isPending()?u._proxyPromiseArray(this,-1):u._isFulfilled()?(n=u._value(),this._gotAccum=!0):(this._reject(u._reason()),l=!0)),f||this._zerothIsAccum||(this._gotAccum=!0);var p=s();this._callback=null===p?r:p.bind(r),this._accum=n,l||a.invoke(h,this,void 0)}function h(){this._init$(void 0,-5)}function p(t,e,r,o){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new f(t,e,r,o).promise()}c.inherits(f,r),f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},f.prototype._promiseFulfilled=function(t,r){var n=this._values;n[r]=t;var i,s=this.length(),a=this._preservedValues,c=null!==a,f=this._gotAccum,h=this._valuesPhase;if(!h)for(h=this._valuesPhase=new Array(s),i=0;i<s;++i)h[i]=0;if(i=h[r],0===r&&this._zerothIsAccum?(this._accum=t,this._gotAccum=f=!0,h[r]=0===i?1:2):-1===r?(this._accum=t,this._gotAccum=f=!0):0===i?h[r]=1:(h[r]=2,this._accum=t),f){for(var p,d=this._callback,y=this._promise._boundValue(),v=this._reducingIndex;v<s;++v)if(2!==(i=h[v])){if(1!==i)return;if(t=n[v],this._promise._pushContext(),c?(a.push(t),p=u(d).call(y,t,v,s)):p=u(d).call(y,this._accum,t,v,s),this._promise._popContext(),p===l)return this._reject(p.e);var _=o(p,this._promise);if(_ instanceof e){if((_=_._target())._isPending())return h[v]=4,_._proxyPromiseArray(this,v);if(!_._isFulfilled())return this._reject(_._reason());p=_._value()}this._reducingIndex=v+1,this._accum=p}else this._reducingIndex=v+1;this._resolve(c?a:this._accum)}},e.prototype.reduce=function(t,e){return p(this,t,e,null)},e.reduce=function(t,e,r,n){return p(t,e,r,n)}}},{"./async.js":2,"./util.js":38}],31:[function(t,e,n){"use strict";var o,i=t("./util");if(i.isNode&&"undefined"==typeof MutationObserver){var s=r.g.setImmediate,a=process.nextTick;o=i.isRecentNode?function(t){s.call(r.g,t)}:function(t){a.call(process,t)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?o="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}:(o=function(t){var e=document.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}}).isStatic=!0;e.exports=o},{"./util":38}],32:[function(t,e,r){"use strict";e.exports=function(e,r){var n=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util.js").inherits(o,r),o.prototype._promiseResolved=function(t,e){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},o.prototype._promiseFulfilled=function(t,e){var r=new n;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},o.prototype._promiseRejected=function(t,e){var r=new n;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},e.settle=function(t){return new o(t).promise()},e.prototype.settle=function(){return new o(this).promise()}}},{"./util.js":38}],33:[function(t,e,r){"use strict";e.exports=function(e,r,n){var o=t("./util.js"),i=t("./errors.js").RangeError,s=t("./errors.js").AggregateError,a=o.isArray;function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new c(t),o=r.promise();return r.setHowMany(e),r.init(),o}o.inherits(c,r),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},c.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new s,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new i(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return u(t,e)},e.prototype.some=function(t){return u(this,t)},e._SomePromiseArray=c}},{"./errors.js":13,"./util.js":38}],34:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0==(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util.js"),o=n.errorObj,i=n.isObject;function s(t){return t.then}var a={}.hasOwnProperty;return function(t,c){if(i(t)){if(t instanceof e)return t;if(function(t){return a.call(t,"_promise0")}(t)){var u=new e(r);return t._then(u._fulfillUnchecked,u._rejectUncheckedCheckError,u._progressUnchecked,u,null),u}var l=n.tryCatch(s)(t);if(l===o)return c&&c._pushContext(),u=e.reject(l.e),c&&c._popContext(),u;if("function"==typeof l)return function(t,i,s){var a=new e(r),c=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var u=!0,l=n.tryCatch(i).call(t,(function(t){a&&(a._resolveCallback(t),a=null)}),(function(t){a&&(a._rejectCallback(t,u,!0),a=null)}),(function(t){a&&"function"==typeof a._progress&&a._progress(t)}));return u=!1,a&&l===o&&(a._rejectCallback(l.e,!0,!0),a=null),c}(t,l,c)}return t}}},{"./util.js":38}],36:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util.js"),o=e.TimeoutError,i=function(t){return s(+this).thenReturn(t)},s=e.delay=function(t,n){if(void 0===n){n=t,t=void 0;var o=new e(r);return setTimeout((function(){o._fulfill()}),n),o}return n=+n,e.resolve(t)._then(i,null,null,n,void 0)};function a(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function c(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}e.prototype.delay=function(t){return s(this,t)},e.prototype.timeout=function(t,e){t=+t;var r=this.then().cancellable();r._cancellationParent=this;var i=setTimeout((function(){!function(t,e){var r;t.isPending()&&(!n.isPrimitive(e)&&e instanceof Error?r=e:("string"!=typeof e&&(e="operation timed out"),r=new o(e)),n.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r))}(r,e)}),t);return r._then(a,c,void 0,i,void 0)}}},{"./util.js":38}],37:[function(t,e,r){"use strict";e.exports=function(e,r,n,o){var i=t("./errors.js").TypeError,s=t("./util.js").inherits,a=e.PromiseInspection;function c(t){for(var r=t.length,n=0;n<r;++n){var o=t[n];if(o.isRejected())return e.reject(o.error());t[n]=o._settledValue}return t}function u(t){setTimeout((function(){throw t}),0)}function l(t,r){var o=0,i=t.length,s=e.defer();return function a(){if(o>=i)return s.resolve();var c=function(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[o++]);if(c instanceof e&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(r),t.promise)}catch(t){return u(t)}if(c instanceof e)return c._then(a,u,null,null,null)}a()}(),s.promise}function f(t){var e=new a;return e._settledValue=t,e._bitField=268435456,l(this,e).thenReturn(t)}function h(t){var e=new a;return e._settledValue=t,e._bitField=134217728,l(this,e).thenThrow(t)}function p(t,e,r){this._data=t,this._promise=e,this._context=r}function d(t,e,r){this.constructor$(t,e,r)}function y(t){return p.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}p.prototype.data=function(){return this._data},p.prototype.promise=function(){return this._promise},p.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},p.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=null!==e?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},p.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},s(d,p),d.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},e.using=function(){var t=arguments.length;if(t<2)return r("you must pass at least 2 arguments to Promise.using");var o,i=arguments[t-1];if("function"!=typeof i)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var s=!0;2===t&&Array.isArray(arguments[0])?(t=(o=arguments[0]).length,s=!1):(o=arguments,t--);for(var a=new Array(t),u=0;u<t;++u){var l=o[u];if(p.isDisposer(l)){var d=l;(l=l.promise())._setDisposable(d)}else{var v=n(l);v instanceof e&&(l=v._then(y,null,null,{resources:a,index:u},void 0))}a[u]=l}var _=e.settle(a).then(c).then((function(t){var e;_._pushContext();try{e=s?i.apply(void 0,t):i.call(void 0,t)}finally{_._popContext()}return e}))._then(f,h,void 0,a,void 0);return a.promise=_,_},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new d(t,this,o());throw new i}}},{"./errors.js":13,"./util.js":38}],38:[function(t,e,r){"use strict";var n,o=t("./es5.js"),i="undefined"==typeof navigator,s=function(){try{var t={};return o.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),a={e:{}};function c(){try{var t=n;return n=null,t.apply(this,arguments)}catch(t){return a.e=t,a}}function u(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function l(t,e,r){if(u(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,n),t}var f=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1};if(o.isES5){var r=Object.getOwnPropertyNames;return function(t){for(var n=[],i=Object.create(null);null!=t&&!e(t);){var s;try{s=r(t)}catch(t){return n}for(var a=0;a<s.length;++a){var c=s[a];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(t,c);null!=u&&null==u.get&&null==u.set&&n.push(c)}}t=o.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(r){if(e(r))return[];var o=[];t:for(var i in r)if(n.call(r,i))o.push(i);else{for(var s=0;s<t.length;++s)if(n.call(t[s],i))continue t;o.push(i)}return o}}(),h=/this\s*\.\s*\S+\s*=/;var p=/^[a-z$_][a-z$_0-9]*$/i;function d(t){try{return t+""}catch(t){return"[no string representation]"}}function y(t){return t instanceof Error&&o.propertyIsWritable(t,"stack")}var v="stack"in new Error?function(t){return y(t)?t:new Error(d(t))}:function(t){if(y(t))return t;try{throw new Error(d(t))}catch(t){return t}};function _(t){return{}.toString.call(t)}var g,m={isClass:function(t){try{if("function"==typeof t){var e=o.names(t.prototype),r=o.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=h.test(t+"")&&o.names(t).length>0;if(r||n||i)return!0}return!1}catch(t){return!1}},isIdentifier:function(t){return p.test(t)},inheritedDataKeys:f,getDataPropertyOrDefault:function(t,e,r){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0},thrower:function(t){throw t},isArray:o.isArray,haveGetters:s,notEnumerableProp:l,isPrimitive:u,isObject:function(t){return!u(t)},canEvaluate:i,errorObj:a,tryCatch:function(t){return n=t,c},inherits:function(t,e){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=t,this.constructor$=e,e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}return n.prototype=e.prototype,t.prototype=new n,t.prototype},withAppended:function(t,e){var r,n=t.length,o=new Array(n+1);for(r=0;r<n;++r)o[r]=t[r];return o[r]=e,o},maybeWrapAsError:function(t){return u(t)?new Error(d(t)):t},toFastProperties:function(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t},filledRange:function(t,e,r){for(var n=new Array(t),o=0;o<t;++o)n[o]=e+o+r;return n},toString:d,canAttachTrace:y,ensureErrorObject:v,originatesFromRejection:function(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)},markAsOriginatingFromRejection:function(t){try{l(t,"isOperational",!0)}catch(t){}},classString:_,copyDescriptors:function(t,e,r){for(var n=o.names(t),i=0;i<n.length;++i){var s=n[i];if(r(s))try{o.defineProperty(e,s,o.getDescriptor(t,s))}catch(t){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof process&&"[object process]"===_(process).toLowerCase()};m.isRecentNode=m.isNode&&(0===(g=process.versions.node.split(".").map(Number))[0]&&g[1]>10||g[0]>0),m.isNode&&m.toFastProperties(process);try{throw new Error}catch(t){m.lastLineError=t}e.exports=m},{"./es5.js":14}]},{},[4])(4)},t.exports=n(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)},625:(t,e,r)=>{var n=r(189)(),o=r(125);t.exports=function(t,e){function r(e){if(!(this instanceof r))return new r(e);try{throw new Error(e)}catch(e){e.name=t,this.stack=e.stack}n&&this.stack&&(this.stack=o(this.stack,t,e)),this.message=e||"",this.name=t}return r.prototype=new(e||Error),r.prototype.constructor=r,r.prototype.inspect=function(){return this.message?"["+t+": "+this.message+"]":"["+t+"]"},r.prototype.name=t,r}},125:t=>{"use strict";t.exports=function(t,e,r){var n=e;return r&&(n+=": "+r),n+t.slice(t.indexOf("\n"))}},189:t=>{"use strict";t.exports=function(){var t=new Error("yep");return!!t.stack&&"Error: yep\n"===t.stack.substr(0,11)}},779:t=>{"use strict";function e(t){if(this._capacity=n(t),this._length=0,this._front=0,r(t)){for(var e=t.length,o=0;o<e;++o)this[o]=t[o];this._length=e}}e.prototype.toArray=function(){for(var t=this._length,e=new Array(t),r=this._front,n=this._capacity,o=0;o<t;++o)e[o]=this[r+o&n-1];return e},e.prototype.push=function(t){var e=arguments.length,r=this._length;if(e>1){var n=this._capacity;if(r+e>n){for(var o=0;o<e;++o)this._checkCapacity(r+1),this[i=this._front+r&this._capacity-1]=arguments[o],r++,this._length=r;return r}var i=this._front;for(o=0;o<e;++o)this[i+r&n-1]=arguments[o],i++;return this._length=r+e,r+e}return 0===e?r:(this._checkCapacity(r+1),this[o=this._front+r&this._capacity-1]=t,this._length=r+1,r+1)},e.prototype.pop=function(){var t=this._length;if(0!==t){var e=this._front+t-1&this._capacity-1,r=this[e];return this[e]=void 0,this._length=t-1,r}},e.prototype.shift=function(){var t=this._length;if(0!==t){var e=this._front,r=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length=t-1,r}},e.prototype.unshift=function(t){var e=this._length,r=arguments.length;if(r>1){if(e+r>(o=this._capacity)){for(var n=r-1;n>=0;n--){this._checkCapacity(e+1);var o=this._capacity;this[s=(this._front-1&o-1^o)-o]=arguments[n],e++,this._length=e,this._front=s}return e}var i=this._front;for(n=r-1;n>=0;n--){var s;this[s=(i-1&o-1^o)-o]=arguments[n],i=s}return this._front=i,this._length=e+r,e+r}return 0===r?e:(this._checkCapacity(e+1),o=this._capacity,this[n=(this._front-1&o-1^o)-o]=t,this._length=e+1,this._front=n,e+1)},e.prototype.peekBack=function(){var t=this._length;if(0!==t)return this[this._front+t-1&this._capacity-1]},e.prototype.peekFront=function(){if(0!==this._length)return this[this._front]},e.prototype.get=function(t){var e=t;if(e===(0|e)){var r=this._length;if(e<0&&(e+=r),!(e<0||e>=r))return this[this._front+e&this._capacity-1]}},e.prototype.isEmpty=function(){return 0===this._length},e.prototype.clear=function(){for(var t=this._length,e=this._front,r=this._capacity,n=0;n<t;++n)this[e+n&r-1]=void 0;this._length=0,this._front=0},e.prototype.toString=function(){return this.toArray().toString()},e.prototype.valueOf=e.prototype.toString,e.prototype.removeFront=e.prototype.shift,e.prototype.removeBack=e.prototype.pop,e.prototype.insertFront=e.prototype.unshift,e.prototype.insertBack=e.prototype.push,e.prototype.enqueue=e.prototype.push,e.prototype.dequeue=e.prototype.shift,e.prototype.toJSON=e.prototype.toArray,Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("")}}),e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(n(1.5*this._capacity+16))},e.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,n=this._length;r+n>e&&function(t,e,r,n,o){for(var i=0;i<o;++i)r[i+n]=t[i+0],t[i+0]=void 0}(this,0,this,e,r+n&e-1)};var r=Array.isArray;function n(t){if("number"!=typeof t){if(!r(t))return 16;t=t.length}return e=Math.min(Math.max(16,t),1073741824),e>>>=0,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,1+((e|=e>>8)|e>>16);var e}t.exports=e},917:(t,e,r)=>{var n,o="Expected a function",i="__lodash_hash_undefined__",s=1/0,a="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,h=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,y=/^\[object .+?Constructor\]$/,v="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,_="object"==typeof self&&self&&self.Object===Object&&self,g=v||_||Function("return this")(),m=Array.prototype,b=Function.prototype,w=Object.prototype,j=g["__core-js_shared__"],k=(n=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",E=b.toString,C=w.hasOwnProperty,S=w.toString,A=RegExp("^"+E.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=g.Symbol,F=m.splice,O=U(g,"Map"),P=U(Object,"create"),T=x?x.prototype:void 0,R=T?T.toString:void 0;function D(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function I(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function B(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function N(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function M(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function U(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){if(!W(t)||k&&k in t)return!1;var e=function(t){var e=W(t)?S.call(t):"";return e==a||e==c}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?A:y;return e.test(function(t){if(null!=t){try{return E.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(r)?r:void 0}D.prototype.clear=function(){this.__data__=P?P(null):{}},D.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},D.prototype.get=function(t){var e=this.__data__;if(P){var r=e[t];return r===i?void 0:r}return C.call(e,t)?e[t]:void 0},D.prototype.has=function(t){var e=this.__data__;return P?void 0!==e[t]:C.call(e,t)},D.prototype.set=function(t,e){return this.__data__[t]=P&&void 0===e?i:e,this},I.prototype.clear=function(){this.__data__=[]},I.prototype.delete=function(t){var e=this.__data__,r=N(e,t);return!(r<0||(r==e.length-1?e.pop():F.call(e,r,1),0))},I.prototype.get=function(t){var e=this.__data__,r=N(e,t);return r<0?void 0:e[r][1]},I.prototype.has=function(t){return N(this.__data__,t)>-1},I.prototype.set=function(t,e){var r=this.__data__,n=N(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},B.prototype.clear=function(){this.__data__={hash:new D,map:new(O||I),string:new D}},B.prototype.delete=function(t){return M(this,t).delete(t)},B.prototype.get=function(t){return M(this,t).get(t)},B.prototype.has=function(t){return M(this,t).has(t)},B.prototype.set=function(t,e){return M(this,t).set(t,e),this};var q=L((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(V(t))return R?R.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}(e);var r=[];return h.test(t)&&r.push(""),t.replace(p,(function(t,e,n,o){r.push(n?o.replace(d,"$1"):e||t)})),r}));function z(t){if("string"==typeof t||V(t))return t;var e=t+"";return"0"==e&&1/t==-s?"-0":e}function L(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(o);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return r.cache=i.set(o,s),s};return r.cache=new(L.Cache||B),r}L.Cache=B;var H=Array.isArray;function W(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function V(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&S.call(t)==u}t.exports=function(t,e,r){var n=null==t?void 0:function(t,e){var r;e=function(t,e){if(H(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!V(t))||f.test(t)||!l.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:H(r=e)?r:q(r);for(var n=0,o=e.length;null!=t&&n<o;)t=t[z(e[n++])];return n&&n==o?t:void 0}(t,e);return void 0===n?r:n}},991:(t,e,r)=>{var n,o="Expected a function",i="__lodash_hash_undefined__",s=1/0,a=9007199254740991,c="[object Arguments]",u="[object Function]",l="[object GeneratorFunction]",f="[object Symbol]",h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p=/^\w*$/,d=/^\./,y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,_=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,m="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,b="object"==typeof self&&self&&self.Object===Object&&self,w=m||b||Function("return this")(),j=Array.prototype,k=Function.prototype,E=Object.prototype,C=w["__core-js_shared__"],S=(n=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",A=k.toString,x=E.hasOwnProperty,F=E.toString,O=RegExp("^"+A.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=w.Symbol,T=E.propertyIsEnumerable,R=j.splice,D=W(w,"Map"),I=W(Object,"create"),B=P?P.prototype:void 0,N=B?B.toString:void 0;function M(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function U(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function q(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function z(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function L(t,e){return null!=t&&x.call(t,e)}function H(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function W(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){if(!X(t)||S&&S in t)return!1;var e=J(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?O:_;return e.test(function(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(r)?r:void 0}M.prototype.clear=function(){this.__data__=I?I(null):{}},M.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},M.prototype.get=function(t){var e=this.__data__;if(I){var r=e[t];return r===i?void 0:r}return x.call(e,t)?e[t]:void 0},M.prototype.has=function(t){var e=this.__data__;return I?void 0!==e[t]:x.call(e,t)},M.prototype.set=function(t,e){return this.__data__[t]=I&&void 0===e?i:e,this},U.prototype.clear=function(){this.__data__=[]},U.prototype.delete=function(t){var e=this.__data__,r=z(e,t);return!(r<0||(r==e.length-1?e.pop():R.call(e,r,1),0))},U.prototype.get=function(t){var e=this.__data__,r=z(e,t);return r<0?void 0:e[r][1]},U.prototype.has=function(t){return z(this.__data__,t)>-1},U.prototype.set=function(t,e){var r=this.__data__,n=z(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},q.prototype.clear=function(){this.__data__={hash:new M,map:new(D||U),string:new M}},q.prototype.delete=function(t){return H(this,t).delete(t)},q.prototype.get=function(t){return H(this,t).get(t)},q.prototype.has=function(t){return H(this,t).has(t)},q.prototype.set=function(t,e){return H(this,t).set(t,e),this};var V=K((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(Z(t))return N?N.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}(e);var r=[];return d.test(t)&&r.push(""),t.replace(y,(function(t,e,n,o){r.push(n?o.replace(v,"$1"):e||t)})),r}));function $(t){if("string"==typeof t||Z(t))return t;var e=t+"";return"0"==e&&1/t==-s?"-0":e}function K(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(o);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return r.cache=i.set(o,s),s};return r.cache=new(K.Cache||q),r}K.Cache=q;var Q=Array.isArray;function J(t){var e=X(t)?F.call(t):"";return e==u||e==l}function G(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function X(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Y(t){return!!t&&"object"==typeof t}function Z(t){return"symbol"==typeof t||Y(t)&&F.call(t)==f}t.exports=function(t,e){return null!=t&&function(t,e,r){var n;e=function(t,e){if(Q(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Z(t))||p.test(t)||!h.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:Q(n=e)?n:V(n);for(var o,i=-1,s=e.length;++i<s;){var u=$(e[i]);if(!(o=null!=t&&r(t,u)))break;t=t[u]}return o||!!(s=t?t.length:0)&&G(s)&&function(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||g.test(t))&&t>-1&&t%1==0&&t<e}(u,s)&&(Q(t)||function(t){return function(t){return Y(t)&&function(t){return null!=t&&G(t.length)&&!J(t)}(t)}(t)&&x.call(t,"callee")&&(!T.call(t,"callee")||F.call(t)==c)}(t))}(t,e,L)}},244:t=>{var e=1/0,r=9007199254740991,n="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=/^(?:0|[1-9]\d*)$/,f=parseInt;function h(t){return t!=t}var p,d,y=Object.prototype,v=y.hasOwnProperty,_=y.toString,g=y.propertyIsEnumerable,m=(p=Object.keys,d=Object,function(t){return p(d(t))}),b=Math.max;function w(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||l.test(t))&&t>-1&&t%1==0&&t<e}var j=Array.isArray;function k(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=E(t)?_.call(t):"";return e==o||e==i}(t)}function E(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function C(t){return!!t&&"object"==typeof t}t.exports=function(t,r,o,i){var l;t=k(t)?t:(l=t)?function(t,e){return function(e,r){for(var n=-1,o=e?e.length:0,i=Array(o);++n<o;)i[n]=(s=e[n],t[s]);var s;return i}(e)}(l,function(t){return k(t)?function(t,e){var r=j(t)||function(t){return function(t){return C(t)&&k(t)}(t)&&v.call(t,"callee")&&(!g.call(t,"callee")||_.call(t)==n)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,i=!!o;for(var s in t)!e&&!v.call(t,s)||i&&("length"==s||w(s,o))||r.push(s);return r}(t):function(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||y))return m(t);var e,r,n=[];for(var o in Object(t))v.call(t,o)&&"constructor"!=o&&n.push(o);return n}(t)}(l)):[],o=o&&!i?function(t){var r=function(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||C(t)&&"[object Symbol]"==_.call(t)}(t))return NaN;if(E(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=E(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var r=c.test(t);return r||u.test(t)?f(t.slice(2),r?2:8):a.test(t)?NaN:+t}(t))===e||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),n=r%1;return r==r?n?r-n:r:0}(o):0;var p=t.length;return o<0&&(o=b(p+o,0)),function(t){return"string"==typeof t||!j(t)&&C(t)&&"[object String]"==_.call(t)}(t)?o<=p&&t.indexOf(r,o)>-1:!!p&&function(t,e,r){if(e!=e)return function(t,e,r,n){for(var o=t.length,i=r+-1;++i<o;)if(e(t[i],i,t))return i;return-1}(t,h,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,r,o)>-1}},427:t=>{var e,r,n=Function.prototype,o=Object.prototype,i=n.toString,s=o.hasOwnProperty,a=i.call(Object),c=o.toString,u=(e=Object.getPrototypeOf,r=Object,function(t){return e(r(t))});function l(t){return!!t&&"object"==typeof t}t.exports=function(t){return!!t&&1===t.nodeType&&l(t)&&!function(t){if(!l(t)||"[object Object]"!=c.call(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e=u(t);if(null===e)return!0;var r=s.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&i.call(r)==a}(t)}},810:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,o="object"==typeof self&&self&&self.Object===Object&&self,i=(n||o||Function("return this")()).isFinite;t.exports=function(t){return"number"==typeof t&&i(t)}},217:t=>{var e=Object.prototype.toString,r=Array.isArray;t.exports=function(t){return"string"==typeof t||!r(t)&&function(t){return!!t&&"object"==typeof t}(t)&&"[object String]"==e.call(t)}},230:(t,e,r)=>{var n=1/0,o=9007199254740991,i="[object Arguments]",s="[object Function]",a="[object GeneratorFunction]",c="[object Symbol]",u="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,l="object"==typeof self&&self&&self.Object===Object&&self,f=u||l||Function("return this")();function h(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var p=Object.prototype,d=p.hasOwnProperty,y=p.toString,v=f.Symbol,_=p.propertyIsEnumerable,g=v?v.isConcatSpreadable:void 0,m=Math.max;function b(t,e,r,n,o){var i=-1,s=t.length;for(r||(r=w),o||(o=[]);++i<s;){var a=t[i];e>0&&r(a)?e>1?b(a,e-1,r,n,o):h(o,a):n||(o[o.length]=a)}return o}function w(t){return k(t)||function(t){return function(t){return E(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?y.call(t):"";return e==s||e==a}(t)}(t)}(t)&&d.call(t,"callee")&&(!_.call(t,"callee")||y.call(t)==i)}(t)||!!(g&&t&&t[g])}function j(t){if("string"==typeof t||function(t){return"symbol"==typeof t||E(t)&&y.call(t)==c}(t))return t;var e=t+"";return"0"==e&&1/t==-n?"-0":e}var k=Array.isArray;function E(t){return!!t&&"object"==typeof t}var C,S,A=(C=function(t,e){return null==t?{}:function(t,e){return function(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var s=e[n],a=t[s];r(0,s)&&(i[s]=a)}return i}(t=Object(t),e,(function(e,r){return r in t}))}(t,function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(b(e,1),j))},S=m(void 0===S?C.length-1:S,0),function(){for(var t=arguments,e=-1,r=m(t.length-S,0),n=Array(r);++e<r;)n[e]=t[S+e];e=-1;for(var o=Array(S+1);++e<S;)o[e]=t[e];return o[S]=n,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(C,this,o)});t.exports=A},950:(t,e)=>{"use strict";var r="undefined"!=typeof Reflect?Reflect.construct:void 0,n=Object.defineProperty,o=Error.captureStackTrace;function i(t){void 0!==t&&n(this,"message",{configurable:!0,value:t,writable:!0});var e=this.constructor.name;void 0!==e&&e!==this.name&&n(this,"name",{configurable:!0,value:e,writable:!0}),o(this,this.constructor)}void 0===o&&(o=function(t){var e=new Error;n(t,"stack",{configurable:!0,get:function(){var t=e.stack;return n(this,"stack",{configurable:!0,value:t,writable:!0}),t},set:function(e){n(t,"stack",{configurable:!0,value:e,writable:!0})}})}),i.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:i,writable:!0}});var s=function(){function t(t,e){return n(t,"name",{configurable:!0,value:e})}try{var e=function(){};if(t(e,"foo"),"foo"===e.name)return t}catch(t){}}();(t.exports=function(t,e){if(null==e||e===Error)e=i;else if("function"!=typeof e)throw new TypeError("super_ should be a function");var n;if("string"==typeof t)n=t,t=void 0!==r?function(){return r(e,arguments,this.constructor)}:function(){e.apply(this,arguments)},void 0!==s&&(s(t,n),n=void 0);else if("function"!=typeof t)throw new TypeError("constructor should be either a string or a function");t.super_=t.super=e;var o={constructor:{configurable:!0,value:t,writable:!0}};return void 0!==n&&(o.name={configurable:!0,value:n,writable:!0}),t.prototype=Object.create(e.prototype,o),t}).BaseError=i},604:(t,e)=>{"use strict";function r(t,e,r){return e<=t&&t<=r}function n(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}var o=-1;function i(t){this.tokens=[].slice.call(t)}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():o},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var s=-1;function a(t,e){if(t)throw TypeError("Decoder error");return e||65533}var c="utf-8";function u(t,e){if(!(this instanceof u))return new u(t,e);if((t=void 0!==t?String(t).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");e=n(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function l(t,e){if(!(this instanceof l))return new l(t,e);if((t=void 0!==t?String(t).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");e=n(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function f(t){var e=t.fatal,n=0,i=0,c=0,u=128,l=191;this.handler=function(t,f){if(f===o&&0!==c)return c=0,a(e);if(f===o)return s;if(0===c){if(r(f,0,127))return f;if(r(f,194,223))c=1,n=f-192;else if(r(f,224,239))224===f&&(u=160),237===f&&(l=159),c=2,n=f-224;else{if(!r(f,240,244))return a(e);240===f&&(u=144),244===f&&(l=143),c=3,n=f-240}return n<<=6*c,null}if(!r(f,u,l))return n=c=i=0,u=128,l=191,t.prepend(f),a(e);if(u=128,l=191,n+=f-128<<6*(c-(i+=1)),i!==c)return null;var h=n;return n=c=i=0,h}}function h(t){t.fatal,this.handler=function(t,e){if(e===o)return s;if(r(e,0,127))return e;var n,i;r(e,128,2047)?(n=1,i=192):r(e,2048,65535)?(n=2,i=224):r(e,65536,1114111)&&(n=3,i=240);for(var a=[(e>>6*n)+i];n>0;){var c=e>>6*(n-1);a.push(128|63&c),n-=1}return a}}u.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=n(e),this._streaming||(this._decoder=new f({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var o,a=new i(r),c=[];!a.endOfStream()&&(o=this._decoder.handler(a,a.read()))!==s;)null!==o&&(Array.isArray(o)?c.push.apply(c,o):c.push(o));if(!this._streaming){do{if((o=this._decoder.handler(a,a.read()))===s)break;null!==o&&(Array.isArray(o)?c.push.apply(c,o):c.push(o))}while(!a.endOfStream());this._decoder=null}return c.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===c[0]?(this._BOMseen=!0,c.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}(c)}},l.prototype={encode:function(t,e){t=t?String(t):"",e=n(e),this._streaming||(this._encoder=new h(this._options)),this._streaming=Boolean(e.stream);for(var r,o=[],a=new i(function(t){for(var e=String(t),r=e.length,n=0,o=[];n<r;){var i=e.charCodeAt(n);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)o.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&i,c=1023&s;o.push(65536+(a<<10)+c),n+=1}else o.push(65533)}n+=1}return o}(t));!a.endOfStream()&&(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);if(!this._streaming){for(;(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);this._encoder=null}return new Uint8Array(o)}},e.p=l,e.k=u},850:t=>{t.exports=function(){for(var t={},r=0;r<arguments.length;r++){var n=arguments[r];for(var o in n)e.call(n,o)&&(t[o]=n[o])}return t};var e=Object.prototype.hasOwnProperty}},n={};function o(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={exports:{}};return r[t].call(i.exports,i,i.exports,o),i.exports}o.m=r,o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,r)=>(o.f[r](t,e),e)),[])),o.u=t=>({25:"@atlaskit-internal_atlassian-legacy-light",210:"@atlaskit-internal_atlassian-shape",211:"@atlaskit-internal_atlassian-typography",214:"@atlaskit-internal_atlassian-legacy-dark",334:"@atlaskit-internal_atlassian-light",436:"@atlaskit-internal_atlassian-spacing",903:"@atlaskit-internal_atlassian-dark"}[t]+".power-up.min.js"),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="trello-for-websites:",o.l=(r,n,i,s)=>{if(t[r])t[r].push(n);else{var a,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var f=u[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==e+i){a=f;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",e+i),a.src=r),t[r]=[n];var h=(e,n)=>{a.onerror=a.onload=null,clearTimeout(p);var o=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((t=>t(n))),e)return e(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={179:0};o.f.j=(e,r)=>{var n=o.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,o)=>n=t[e]=[r,o]));r.push(n[2]=i);var s=o.p+o.u(e),a=new Error;o.l(s,(r=>{if(o.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,n[1](a)}}),"chunk-"+e,e)}};var e=(e,r)=>{var n,i,[s,a,c]=r,u=0;if(s.some((e=>0!==t[e]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);c&&c(o)}for(e&&e(r);u<s.length;u++)i=s[u],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0},r=self.webpackChunktrello_for_websites=self.webpackChunktrello_for_websites||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var i={};return(()=>{"use strict";o.r(i);var t=o(49),e=o.n(t),r=o(21),n=o.n(r),s=o(810),a=o.n(s),c={blue:{50:"#E4F0F6",100:"#BCD9EA",200:"#8BBDD9",300:"#5BA4CF",400:"#298FCA",500:"#0079BF",600:"#026AA7",700:"#055A8C",800:"#094C72",900:"#0C3953"},green:{50:"#EEF6EC",100:"#D6ECD2",200:"#B7DDB0",300:"#99D18F",400:"#7BC86C",500:"#61BD4F",600:"#5AAC44",700:"#519839",800:"#49852E",900:"#3F6F21"},orange:{50:"#FDF5EC",100:"#FCE8D2",200:"#FAD8B0",300:"#FDC788",400:"#FFB968",500:"#FFAB4A",600:"#E99E40",700:"#D29034",800:"#BB8129",900:"#A0711C"},red:{50:"#FBEDEB",100:"#F5D3CE",200:"#EFB3AB",300:"#EC9488",400:"#EF7564",500:"#EB5A46",600:"#CF513D",700:"#B04632",800:"#933B27",900:"#6E2F1A"},yellow:{50:"#FDFAE5",100:"#FAF3C0",200:"#F5EA92",300:"#F3E260",400:"#F5DD29",500:"#F2D600",600:"#E6C60D",700:"#D9B51C",800:"#CCA42B",900:"#BD903C"},purple:{50:"#F7F0FA",100:"#EDDBF4",200:"#DFC0EB",300:"#D5A6E6",400:"#CD8DE5",500:"#C377E0",600:"#A86CC1",700:"#89609E",800:"#6C547B",900:"#484553"},pink:{50:"#FEF2F9",100:"#FCDEF0",200:"#FAC6E5",300:"#FFB0E1",400:"#FF95D6",500:"#FF80CE",600:"#E76EB1",700:"#CD5A91",800:"#B44772",900:"#96304C"},sky:{50:"#E4F7FA",100:"#BDECF3",200:"#8FDFEB",300:"#5DD3E5",400:"#29CCE5",500:"#00C2E0",600:"#00AECC",700:"#0098B7",800:"#0082A0",900:"#006988"},lime:{50:"#ECFBF3",100:"#D3F6E4",200:"#B3F1D0",300:"#90ECC1",400:"#6DECA9",500:"#51E898",600:"#4FD683",700:"#4DC26B",800:"#4CAF54",900:"#4A9839"},gray:{50:"#F8F9F9",100:"#EDEFF0",200:"#E2E4E6",300:"#D6DADC",400:"#CDD2D4",500:"#C4C9CC",600:"#B6BBBF",700:"#A5ACB0",800:"#959DA1",900:"#838C91"},black:{50:"#C1C7D0",100:"#7A869A",200:"#6B778C",300:"#5E6C84",400:"#505F79",500:"#42526E",600:"#344563",700:"#253858",800:"#172B4D",900:"#091E42"},"business-blue":{50:"#EDEFF4",100:"#D2D7E5",200:"#B2B9D0",300:"#838FB5",400:"#6170A1",500:"#42548E",600:"#3E4D80",700:"#3A476F",800:"#36405F",900:"#30364C"},shades:{0:"#FFFFFF",10:"#FAFCFC",20:"#F5F6F7",30:"#EBEEF0",40:"#DFE3E6",50:"#C2CCD1",60:"#B3BAC5",70:"#A6B3BA",80:"#97A7B0",90:"#899AA3",100:"#798D99",200:"#6B808C",300:"#5E7785",400:"#516B7A",500:"#425E6E",600:"#355263",700:"#254659",800:"#17394D",900:"#092D42"}};c.neutrals=c.shades;var u=function(t,e){if(!t||"string"!=typeof t)throw new Error("Invalid color name");var r=t.toLowerCase();if(!c[r])throw new Error("Unknown color name: ".concat(r));var n=a()(e)?e:500;if(!c[r][n])throw new Error("Unknown color weight: ".concat(n));return c[r][n]},l=function(t){if(!t||"string"!=typeof t)throw new Error("Invalid named color string");if(/^#[a-fA-F0-9]{6}$/.test(t))return t;var e=/^([a-zA-Z-]+)(#[1-9]?0?0)?$/.exec(t);if(!e)throw new Error("Invalid accentColor provided");var r=e[1],n=500;return e[2]&&(n=parseInt(e[2].substring(1),10)),u(r,n)};function f(t){if(!t)return null;for(var e=0;e<t.length;e+=1){var r=t[e];if("number"!=typeof r||r%1!=0||r>255||r<0)throw new Error("Invalid bytes. Bytes must be 0 - 255")}for(var n=new Uint8Array(t),o=[],i=0;i<n.length;i+=1){var s=n[i].toString(16);s.length<2&&(s="0".concat(s)),o.push(s)}return o.join("")}function h(t){if(!t)throw new Error("Invalid hexString");var e=t.toLowerCase();if(!/^[0-9a-f]+$/.test(e)||e.length%2!=0)throw new Error("Invalid hexString");for(var r=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var o=parseInt(e.substr(n,2),16);if(isNaN(o))throw new Error("Invalid hexString");r[n/2]=o}return r}var p=o(604);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}var y,v=function(t){return"function"==typeof t},_=v(window.TextEncoder)?window.TextEncoder:p.p,g=v(window.TextDecoder)?window.TextDecoder:p.k,m="AES-CBC",b={name:m,length:256},w=!0,j=["encrypt","decrypt"],k="object"===d(window.crypto),E=!k&&"object"===d(window.msCrypto);k?y=null==window.crypto.subtle&&null!=window.crypto.webkitSubtle?window.crypto.webkitSubtle:window.crypto.subtle:E&&(y=window.msCrypto.subtle);var C=function(t){var e=(new _).encode(t);return new(n())((function(t,r){if(k)y.digest({name:"SHA-256"},e).then((function(e){return t(f(e))}));else if(E){var n=y.digest({name:"SHA-256"},e);n.oncomplete=function(e){t(f(e.target.result))},n.onerror=function(t){r(new Error("Error digesting text: ".concat(t.type)))}}else r(new Error("Browser not supported."))}))};const S={generateInitVector:function(){if(k&&"function"==typeof window.crypto.getRandomValues)return window.crypto.getRandomValues(new Uint8Array(16));if(E&&"function"==typeof window.msCrypto.getRandomValues)return window.msCrypto.getRandomValues(new Uint8Array(16));throw new Error("Browser not supported.")},generateAESCBCKey:function(){return new(n())((function(t,e){if(k)t(y.generateKey(b,w,j));else if(E){var r=y.generateKey(b,w,j);r.oncomplete=function(e){t(e.target.result)},r.onerror=function(t){e(new Error("Error generating key: ".concat(t.type)))}}else e(new Error("Browser not supported."))}))},importAESCBCKeyFromRaw:function(t){var e=h(t);return new(n())((function(t,r){if(k)t(y.importKey("raw",e,m,w,j));else if(E){var n=y.importKey("raw",e,m,w,j);n.oncomplete=function(e){t(e.target.result)},n.onerror=function(t){r(new Error("Error importing key: ".concat(t.type)))}}else r(new Error("Browser not supported."))}))},exportAESCBCKeyToRaw:function(t){return new(n())((function(e,r){if(k)y.exportKey("raw",t).then((function(t){return e(f(t))}));else if(E){var n=y.exportKey("raw",t);n.oncomplete=function(t){e(f(t.target.result))},n.onerror=function(t){r(new Error("Error exporting key: ".concat(t.type)))}}else r(new Error("Browser not supported."))}))},encryptSecret:function(t,e,r){return C(r).then((function(o){var i=(new _).encode(o+r);return k?y.encrypt({name:m,iv:t},e,i).then((function(t){return f(t)})):E?new(n())((function(r,n){var o=y.encrypt({name:m,iv:t},e,i);o.oncomplete=function(t){r(f(t.target.result))},o.onerror=function(t){n(new Error("Error encrypting secret: ".concat(t.type)))}})):n().reject(new Error("Browser not supported."))}))},decryptSecret:function(t,e,r){var o=h(r);return new(n())((function(r,n){if(k)y.decrypt({name:m,iv:t},e,o).then((function(t){r((new g).decode(t))})).catch((function(t){n(new Error("Decryption failed. Message: ".concat(t.message)))}));else if(E){var i=y.decrypt({name:m,iv:t},e,o);i.oncomplete=function(t){r((new g).decode(t.target.result))},i.onerror=function(t){n(new Error("Decryption failed. Message: ".concat(t.type)))}}else n(new Error("Browser not supported."))})).then((function(t){var e=t.substring(0,64),r=t.substring(64);if(!/^[a-f0-9]{64}$/.test(e))throw new Error("Decryption failed. Unable to validate integrity.");return C(r).then((function(t){if(t===e)return r;throw new Error("Decryption failed. Unable to validate integrity.")}))}))},sha256Digest:C};var A=o(917),x=o.n(A),F=o(950),O=o.n(F),P="Error";const T=function(t,e){var r=O()([t,P].join("::"));return e.forEach((function(e){r[e]=O()([t,e].join("::"),r)})),r},R=T("i18n",["ArgNotFound","InvalidResourceUrl","KeyNotFound","LoadLocalizerNotAFunction","LocaleNotFound","LocaleNotSpecified","LocalizerNotFound","MissingDefaultLocale","MissingResourceUrl","MissingSupportedLocales","UnableToParseArgs","UnableToParseAttrs","Unknown","UnsupportedKeyType"]);function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var I,B,N=function t(e,r,n){return n.includes(e)?e:e.includes("-")?t(e.split("-")[0],r,n):r},M=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resourceDictionary=e}var e,r;return e=t,r=[{key:"localize",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{dotNotation:!1},n=null!=r&&r.dotNotation?x()(this.resourceDictionary,t):this.resourceDictionary[t];if(null!=n){if(e){for(var o=null!=r&&r.dotNotation?/\{(\w+?(?:\.\w+?)*\w+?)\}/gi:/\{(\w+?)\}/gi,i="",s=o.exec(n),a=0;s;){s.index>a&&(i+=n.substring(a,s.index));var c=null!=r&&r.dotNotation?x()(e,s[1]):e[s[1]];if(void 0===c)throw new R.ArgNotFound("Arg: ".concat(s[1]," was not defined for key: ").concat(t));i+=c,a=s.index+s[0].length,s=o.exec(n)}return i+n.substring(a)}return n}throw new R.KeyNotFound("No resource defined for key: ".concat(t))}}],r&&D(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),U="";const q=function(t,e){var r=e||{},o="";if(!t)return o="Unable to load a localizer without a locale",n().reject(new R.LocaleNotSpecified(o));if(window.localizer)return n().resolve();if(r.localizer)window.localizer=r.localizer;else{if(r.loadLocalizer)return"function"==typeof r.loadLocalizer?n().resolve(r.loadLocalizer(t)).then((function(t){return window.localizer=t,n().resolve()})):(o="Specified loadLocalizer must be a function that returns a localizer or a Promise resolving to a localizer",n().reject(new R.LoadLocalizerNotAFunction(o)));if(r.localization){var i=r.localization,s=i.defaultLocale,a=i.supportedLocales,c=i.resourceUrl;return s?a?c?function(t,e,r,o){return n().try((function(){var i;return(i=t?N(t,e,r):e)===U&&B?B:(I||(I=new(n())((function(t,e){var r=new XMLHttpRequest;r.open("GET",function(t,e){if(!t.includes("{locale}"))throw new R.InvalidResourceUrl("ResourceUrl must specify where to place locale with {locale}");return t.replace("{locale}",e)}(o,i),!0),r.onload=function(){try{if(200===r.status){var n=JSON.parse(r.responseText);return B=new M(n),U=i,t(B)}return 404===r.status?e(new R.LocaleNotFound("".concat(i," not found."))):e(new R.Unknown("Unable to load locale: ".concat(i,", status: ").concat(r.status)))}catch(t){return e(new R.Unknown(t.message))}},r.send()}))),I)}))}(t,s,a,c).then((function(t){return window.localizer=t,n().resolve()})):n().reject(new R.MissingResourceUrl("Missing resourceUrl")):n().reject(new R.MissingSupportedLocales("Missing supportedLocales")):n().reject(new R.MissingDefaultLocale("Missing defaultLocale"))}}return n().resolve()};function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}var L=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{dotNotation:!1};if(window.localizer&&"function"==typeof window.localizer.localize)return window.localizer.localize(t,e,r);throw new R.LocalizerNotFound("No localizer available for localization.")},H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{dotNotation:!1};return t?t.map((function(t){if("string"==typeof t)return L(t,{},e);if(Array.isArray(t))return L(t[0],t[1],e);throw new R.UnsupportedKeyType("localizeKeys doesn't recognize the supplied key type: ".concat(z(t)))})):[]},W=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{dotNotation:!1},r=t.querySelectorAll("[data-i18n-id],[data-i18n-attrs]"),n=0,o=r.length;n<o;n+=1){var i={},s=r[n];if(s.dataset.i18nArgs)try{i=JSON.parse(s.dataset.i18nArgs)}catch(t){throw new R.UnableToParseArgs("Error parsing args. Error: ".concat(t.message))}if(s.dataset.i18nId&&(s.textContent=L(s.dataset.i18nId,i,e)),s.dataset.i18nAttrs){var a=void 0;try{a=JSON.parse(s.dataset.i18nAttrs)}catch(t){throw new R.UnableToParseAttrs("Error parsing attrs. Error: ".concat(t.message))}a&&a.placeholder&&(s.placeholder=L(a.placeholder,i,e))}}};const V=function(t){if(/^https?:\/\//.test(t))return t;var e=window.location.origin||"".concat(window.location.protocol,"//").concat(window.location.host),r=window.location.pathname.replace(/[^/]+$/,"");return/^\/\//.test(t)?[e,t.substring(1)].join(""):/^\//.test(t)?[e,t].join(""):[e,r,t].join("")};var $=o(991),K=o.n($);const Q=function(t){window.console&&"function"==typeof console.warn&&console.warn(t)};var J={},G={},X=0;setInterval((function(){var t=Object.keys(J),e=Date.now();t.forEach((function(t){J[t].expires<e&&delete J[t]}))}),3e4);const Y={callback:function(t,e,r){var o=e.callback,i=e.action,s=e.options;return n().try((function(){switch(i){case"run":if(K()(G,o))return G[o].call(null,t,s);if(K()(J,o))return G[o]=J[o].fx,delete J[o],G[o].call(null,t,s);throw Q("Attempted to run callback that does not exist or was not retained"),t.NotHandled("callback does not exist or was not retained");case"retain":if(K()(J,o))return G[o]=J[o].fx,delete J[o],o;throw Q("Attempted to retain callback that does not exist"),t.NotHandled("callback can no longer be retained");case"release":return K()(G,o)?(delete G[o],null):(Q("Attempted to release callback that is not retained"),null);default:throw Q("Attempted an unknown callback action"),t.NotHandled("unknown callback action")}})).then(r)},serialize:function(t){var e="cb".concat(X+=1);return J[e]={fx:t,expires:Date.now()+12e4},{_callback:e}},reset:function(){X=0,Object.keys(J).forEach((function(t){delete J[t]})),Object.keys(G).forEach((function(t){delete G[t]}))}};var Z=o(850),tt=o.n(Z),et=o(244),rt=o.n(et),nt=o(427),ot=o.n(nt),it=o(217),st=o.n(it),at=o(230),ct=o.n(at);function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}const lt=function t(e,r){if(!e)return e;if(("url"===r||"icon"===r)&&"string"==typeof e&&0===e.indexOf("./"))return V(e.substr(2));var n={};switch(ut(e)){case"object":return Array.isArray(e)?e.map(t):(Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n);case"function":return Y.serialize(e);default:return e}},ft=function(t){return/^[a-f0-9]{24}$/.test(t)},ht=function(t){return/^[a-zA-Z0-9]{8}$/.test(t)},pt=function(t){return-1!==["shared","private"].indexOf(t)},dt=function(t){return-1!==["board","card","member","organization"].indexOf(t)};function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _t(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(r),!0).forEach((function(e){gt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var mt={board:8192,card:4096,member:4096,organization:8192},bt={};function wt(t,e,r,o){var i=this,s=_t({},r);i.setRequestQueue||(i.setRequestQueue=new Map);var a="PUT:".concat(t,":").concat(e),c=i.setRequestQueue.has(a)?i.setRequestQueue.get(a):{chain:n().resolve(),size:0},u=c.chain,l=c.size,f=function(){return i.get(t,e)},h=u.then(f,f).then((function(t){var e=t||{},r=JSON.stringify(e),c=o(e);if(s.data=JSON.stringify(c),s.data===r)return n().resolve();if(s.data.length>mt[s.scope])throw new Error("PluginData length of ".concat(mt[s.scope]," characters exceeded. See: https://developers.trello.com/v1.0/reference#section-size-limit"));var u=i.requestWithContext("set",s);return u.finally((function(){var t=i.setRequestQueue.get(a);1===t.size?i.setRequestQueue.delete(a):i.setRequestQueue.set({chain:t.chain,size:t.size-1})})),u}));return i.setRequestQueue.set(a,{chain:h,size:l+1}),h}bt.getContext=function(){return this.args[0].context},bt.isMemberSignedIn=function(){var t=this.getContext();return null!=t&&"notLoggedIn"!==t.member&&null!=t.member},bt.memberCanWriteToModel=function(t){if(!this.isMemberSignedIn())return!1;if("string"!=typeof t||!rt()(["board","card","organization"],t))throw new Error("modelType must be one of: board, card, organization");var e=this.getContext();return null!=e&&null!=e.permissions&&"write"===e.permissions[t]},bt.requestWithContext=function(t,e){var r=e||{};return r.context="function"==typeof this.getContext?this.getContext():{},this.request(t,lt(r))},bt.getAll=function(){var t=this;return t.outstandingGetAllReq||(t.outstandingGetAllReq=t.requestWithContext("data").then((function(e){var r={};return Object.keys(e).forEach((function(t){r[t]={},Object.keys(e[t]).forEach((function(n){try{r[t][n]=JSON.parse(e[t][n])}catch(e){r[t][n]={}}}))})),t.outstandingGetAllReq=null,r})).catch((function(e){throw t.outstandingGetAllReq=null,e}))),t.outstandingGetAllReq},bt.get=function(t,e,r,n){var o=this;o.outstandingGetRequests||(o.outstandingGetRequests=new Map);var i="GET",s={};if((ft(t)||ht(t))&&(s.idCard=t,t="card",i="GET:".concat(s.idCard)),!pt(e))throw new Error("Invalid value for visibility.");if(!dt(t))throw new Error("Invalid value for scope.");return o.outstandingGetRequests.has(i)||o.outstandingGetRequests.set(i,o.requestWithContext("data",s)),o.outstandingGetRequests.get(i).then((function(s){var a={};if(s&&K()(s,t)&&K()(s[t],e))try{a=JSON.parse(s[t][e])}catch(t){}return o.outstandingGetRequests.delete(i),null==r?a||n:null!=a&&K()(a,r)?a[r]:n})).catch((function(t){throw o.outstandingGetRequests.delete(i),t}))},bt.set=function(t,e,r,n){var o={scope:t,visibility:e};if(!pt(e))throw new Error("Invalid value for visibility.");if((ft(t)||ht(t))&&(o.idCard=t,o.scope="card"),!dt(o.scope))throw new Error("Invalid value for scope.");return wt.call(this,t,e,o,(function(t){var e=_t({},t);return"object"===yt(r)?Object.keys(r).forEach((function(t){e[t]=r[t]})):e[r]=n,e}))},bt.remove=function(t,e,r){var n={scope:t,visibility:e},o=r;if((ft(t)||ht(t))&&(n.idCard=t,n.scope="card"),Array.isArray(o)||(o=[r]),o.some((function(t){return"string"!=typeof t})))return Q("t.remove function takes either a single string or an array of strings for which keys to remove"),null;if(!dt(n.scope))throw new Error("Invalid value for scope.");if(!pt(e))throw new Error("Invalid value for visibility.");return wt.call(this,t,e,n,(function(t){var e=_t({},t);return o.forEach((function(t){delete e[t]})),e}))},bt.safe=function(t){return String(null==t?"":t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/`/g,"&#x60;")},bt.arg=function(t,e){var r=this.args[1];return r&&"object"===yt(r)&&K()(r,t)?r[t]:e},bt.signUrl=function(t,e){var r=this.getContext(),n=encodeURIComponent(JSON.stringify({secret:this.secret,context:r,locale:window.locale,args:e}));return t.includes("#")?(Q("Power-Up signing url that already has a hash. This will remove the existing hash.",t),"".concat(t.slice(0,t.indexOf("#")),"#").concat(n)):"".concat(t,"#").concat(n)},bt.navigate=function(t){return t&&"object"===yt(t)&&"string"==typeof t.url?this.requestWithContext("navigate",t):n().reject(new Error("Invalid or missing url provided in options object"))},bt.showCard=function(t){return t&&"string"==typeof t?this.requestWithContext("showCard",{idCard:t}):n().reject(new Error("Invalid idCard provided"))},bt.hideCard=function(){return this.requestWithContext("hideCard")},bt.alert=function(t){var e=ct()(t,["message","duration","display"]),r=e.message;return!st()(r)||r.length<1||r.length>140?n().reject(new Error("Alert requires a message of 1 to 140 characters")):this.requestWithContext("alert",e)},bt.hideAlert=function(){return this.requestWithContext("hideAlert")},bt.popup=function(t){if(!(this.getContext().el||t&&t.mouseEvent))return Q("Unable to open popup. Context missing target element or a mouseEvent was not provided. This usually means you are using the wrong t param, and should instead use the one provided to the callback function itself, not the capability handler. If you are within an iframe, then make sure you pass the mouse event."),n().reject(new Error("Context missing target element and no mouse event provided"));var e={title:t.title};if(t&&t.mouseEvent){var r=t.mouseEvent,o=r.clientX,i=r.clientY;if(!a()(o)||!a()(i))return n().reject(new Error("Invalid mouseEvent was provided"));var s=o,c=i;if(0===s&&0===c){if(!r.target||!r.target.getBoundingClientRect)return n().reject(new Error("Invalid mouseEvent was provided"));var u=r.target.getBoundingClientRect();s=u.left,c=u.top}e.pos={x:s,y:c}}t&&"function"==typeof t.callback&&(e.callback=t.callback);try{if(t.url&&"string"==typeof t.url)e.content={type:"iframe",url:this.signUrl(V(t.url),t.args),width:t.width,height:t.height};else if(t.items)e.content=function(t){var e;if(Array.isArray(t.items)||"function"==typeof t.items)e=t.items;else{if("object"!==yt(t.items))throw new Error("Unsupported items type for popup. Must be an array, object, or function");e=Object.keys(t.items).map((function(e){var r=t.items[e];return"function"==typeof r?{text:e,callback:r}:r&&"function"==typeof r.callback?tt()({text:e},r):{text:e}}))}return{items:e,type:"list",search:t.search}}(t);else if("confirm"===t.type)e.content=function(t){if("string"!=typeof t.message||"string"!=typeof t.confirmText)throw new Error("Confirm popups must have a message and confirmText");if("function"!=typeof t.onConfirm)throw new Error("Confirm popup requires onConfirm function");if("function"==typeof t.onCancel&&"string"!=typeof t.cancelText)throw new Error("Confirm popup requires cancelText to support onCancel function");var e={type:"confirm",message:t.message,confirmStyle:t.confirmStyle||"primary",confirmText:t.confirmText,onConfirm:t.onConfirm};return"string"==typeof t.cancelText&&(e.cancelText=t.cancelText),"function"==typeof t.onCancel&&(e.onCancel=t.onCancel),e}(t);else{if("datetime"!==t.type&&"date"!==t.type)return n().reject(new Error("Unknown popup type requested"));delete e.callback,e.content=function(t){if("function"!=typeof t.callback)throw new Error("Date popups must have a callback function");var e={type:t.type,callback:t.callback};if(t.date&&"function"==typeof t.date.toISOString&&(e.date=t.date.toISOString()),t.minDate&&"function"==typeof t.minDate.toISOString&&(e.minDate=t.minDate.toISOString()),t.maxDate&&"function"==typeof t.maxDate.toISOString&&(e.maxDate=t.maxDate.toISOString()),e.minDate&&e.maxDate&&e.minDate>e.maxDate)throw new Error("Date popup maxDate must come after minDate if specified");return e}(t)}}catch(t){return n().reject(t)}return this.requestWithContext("popup",e)},bt.overlay=function(t){Q("overlay() has been deprecated. Please use modal() instead. See: https://trello.readme.io/v1.0/reference#t-modal");var e={};return t.url&&(e.content={type:"iframe",url:this.signUrl(V(t.url),t.args),inset:t.inset}),this.requestWithContext("overlay",e)},bt.boardBar=function(t){if(!t||!t.url||"string"!=typeof t.url)throw new Error("BoardBar options requires a valid url");if(t.actions&&!Array.isArray(t.actions))throw new Error("BoardBar actions property must be an array");var e;t.accentColor&&(e=l(t.accentColor));var r={content:{actions:t.actions||[],callback:t.callback,accentColor:e,height:t.height||200,resizable:t.resizable||!1,title:t.title,type:"iframe",url:this.signUrl(V(t.url),t.args)}};return this.requestWithContext("board-bar",r)},bt.modal=function(t){if(!t||!t.url||"string"!=typeof t.url)throw new Error("Modal options requires a valid url");if(t.actions&&!Array.isArray(t.actions))throw new Error("Modal actions property must be an array");var e;t.accentColor&&(e=l(t.accentColor));var r={content:{actions:t.actions||[],callback:t.callback,accentColor:e,fullscreen:t.fullscreen||!1,height:t.height||400,title:t.title,type:"iframe",url:this.signUrl(V(t.url),t.args)}};return this.requestWithContext("modal",r)},bt.updateModal=function(t){if(!t)return n().resolve();var e=t.accentColor,r=t.actions,o=t.fullscreen,i=t.title;if(!(e||r||o||i))return n().resolve();if(t.url)throw new Error("Updating Modal url not allowed");if(t.callback)throw new Error("Unable to update callback. You can set onBeforeUnload to run code before Modal close: https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload");if(r&&!Array.isArray(r))throw new Error("Modal actions property must be an array");var s={content:ct()(t,["actions","accentColor","fullscreen","title"])};return e&&(s.content.accentColor=l(e)),this.requestWithContext("update-modal",s)},bt.hide=function(){return Q("hide() handler has been deprecated. Please use closePopup()"),this.requestWithContext("close-popup")},bt.closePopup=function(){return this.requestWithContext("close-popup")},bt.back=function(){return this.requestWithContext("pop-popup")},bt.hideOverlay=function(){return Q("hideOverlay() handler has been deprecated. Please use closeOverlay()"),this.requestWithContext("close-overlay")},bt.closeOverlay=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q("overlay() has been deprecated. Please use modal() instead. See: https://trello.readme.io/v1.0/reference#t-modal");var e={inset:t.inset};return this.requestWithContext("close-overlay",e)},bt.hideBoardBar=function(){return Q("hideBoardBar() handler has been deprecated. Please use closeBoardBar()"),this.requestWithContext("close-board-bar")},bt.closeBoardBar=function(){return this.requestWithContext("close-board-bar")},bt.closeModal=function(){return this.requestWithContext("close-modal")},bt.sizeTo=function(t){var e;if(st()(t)){var r=document.querySelector(t);if(!r)return n().reject(new Error("No elements matched sizeTo query selector: ".concat(t)));r.style.overflow="hidden",e=Math.ceil(Math.max(r.scrollHeight,r.getBoundingClientRect().height))}else if(ot()(t)){var o=t;o.style.overflow="hidden",e=Math.ceil(Math.max(o.scrollHeight,o.getBoundingClientRect().height))}else{if(!(a()(t)&&t>0))return n().reject(new Error("Invalid argument. Must be a selector, element, or positive number. Was: ".concat(t)));e=t}return e?this.requestWithContext("resize",{height:e}):n().reject(new Error("Unable to determine desired height for ".concat(t," computed ").concat(e)))},bt.localizeKey=L,bt.localizeKeys=H,bt.localizeNode=W,bt.card=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.requestWithContext("card",{fields:e})},bt.cards=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.requestWithContext("cards",{fields:e})},bt.list=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.requestWithContext("list",{fields:e})},bt.lists=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.requestWithContext("lists",{fields:e})},bt.member=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.requestWithContext("member",{fields:e})},bt.board=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.requestWithContext("board",{fields:e})},bt.organization=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.requestWithContext("organization",{fields:e})},bt.attach=function(t){if(!this.memberCanWriteToModel("card"))throw new Error("User lacks write permission on card.");return this.requestWithContext("attach-to-card",t)},bt.requestToken=function(t){if(!this.isMemberSignedIn())throw new Error("No active member in context.");return this.requestWithContext("request-token",t)},bt.authorize=function(t,r){var o,i=e().randomId(),s=r||{};if("string"==typeof t)o=t;else{if("function"!=typeof t)throw Q("authorize requires a url or function that takes a secret and returns a url"),new Error("Invalid arguments passed to authorize");o=t(i)}var a=function(){return!0};s.validToken&&"function"==typeof s.validToken&&(a=s.validToken);var c=s.width||800,u=s.height||600,l=["width=",c,",height=",u,",left=",window.screenX+Math.floor((window.outerWidth-c)/2),",top=",window.screenY+Math.floor((window.outerHeight-u)/2)].join(""),f=function(t,e){var r=window.open(t,"authorize",e);return"function"==typeof s.windowCallback&&s.windowCallback(r),r};return new(n())((function(r){window.addEventListener("storage",function(t){return function e(r){if("token"===r.key&&r.newValue&&a(r.newValue)){try{localStorage.removeItem("token")}catch(t){}window.removeEventListener("storage",e,!1),delete window.authorize,t(r.newValue)}}}(r),!1),"function"==typeof t?new(e())({Promise:n(),local:window,remote:f(o,l),targetOrigin:s.targetOrigin||"*",secret:i,handlers:{value:function(t,e){e&&e.token&&a(e.token)&&(this.stop(),r(e.token))}}}):(window.authorize=function(t){t&&a(t)&&(delete window.authorize,r(t))},f(o,l))}))},bt.storeSecret=function(t,e){if(!this.isMemberSignedIn())throw new Error("No active member in context.");var r=this.getContext().member,n="".concat(r,":").concat(t),o=this;return S.sha256Digest(n).then((function(t){return o.get("member","private","aescbc").then((function(t){return t||S.generateAESCBCKey().then((function(t){return S.exportAESCBCKeyToRaw(t)}))})).then((function(r){return S.importAESCBCKeyFromRaw(r).then((function(n){var i=S.generateInitVector();return S.encryptSecret(i,n,e).then((function(e){var n="".concat(f(i),";").concat(e);return window.localStorage.setItem(t,n),o.set("member","private","aescbc",r).then((function(){return{key:t,value:n}}))}))}))}))}))},bt.loadSecret=function(t){if(!this.isMemberSignedIn())throw new Error("No active member in context.");var e=this.getContext().member,r=this,n="".concat(e,":").concat(t);return S.sha256Digest(n).then((function(t){return window.localStorage.getItem(t)})).then((function(t){return t?r.get("member","private","aescbc").then((function(e){return e?S.importAESCBCKeyFromRaw(e).then((function(e){var r=t.substring(0,t.indexOf(";")),n=t.substring(t.indexOf(";")+1),o=h(r);return S.decryptSecret(o,e,n)})):null})):null}))},bt.clearSecret=function(t){if(!this.isMemberSignedIn())throw new Error("No active member in context.");var e=this.getContext().member,r="".concat(e,":").concat(t);return S.sha256Digest(r).then((function(t){return window.localStorage.removeItem(t),null}))},bt.notifyParent=function(t,e){var r=e||{};window.parent.postMessage(t,r.targetOrigin||"*")},bt.confetti=function(t){var e={};if(t&&a()(t.clientX)&&a()(t.clientY)&&ot()(t.target)){var r=t,o=r.clientX,i=r.clientY;if(0===o&&0===i){if(!r.target||!r.target.getBoundingClientRect)return n().reject(new Error("Invalid mouseEvent was provided"));var s=r.target.getBoundingClientRect();o=s.left+r.target.offsetWidth/2,i=s.top+r.target.offsetHeight/2}e.pos={x:o,y:i}}else{var c;if(ot()(t))c=t;else if(st()(t)&&!(c=document.querySelector(t)))return n().reject(new Error("No elements matched confetti query selector: ".concat(t)));if(c){var u=c.getBoundingClientRect();e.pos={x:u.left+c.offsetWidth/2,y:u.top+c.offsetHeight/2}}}return this.requestWithContext("confetti",e)};var jt=new Map;bt.jwt=function(t){if(!this.isMemberSignedIn())return n().reject(new Error("No active member in context."));var e=!0===(null==t?void 0:t.card);if(e&&!this.getContext().card)return n().reject(new Error("No card in context"));var r="";if("string"==typeof(null==t?void 0:t.state)){if(t.state.length>2048)return n().reject(new Error("State parameter must be a string of at most 2048 characters"));r=t.state}else if(null!=(null==t?void 0:t.state))return n().reject(new Error("State parameter must be a string of at most 2048 characters"));var o=[this.getContext().board,e?this.getContext().card:"",r].join(":");if(jt.has(o))return jt.get(o);var i=this.requestWithContext("jwt",{state:r,includeCard:e});return i.finally((function(){jt.delete(o)})),jt.set(o,i),jt.get(o)};const kt=bt,Et=function(t,r){var o=r||{};return new(o.io||e())({Promise:n(),local:window,remote:window.parent,targetOrigin:o.targetOrigin||"https://trello.com",secret:o.secret,strict:!0,handlers:t,hostHandlers:o.hostHandlers,helpfulStacks:"boolean"!=typeof o.helpfulStacks||o.helpfulStacks,Sentry:o.Sentry})},Ct=T("restApi",["AuthDeniedError","AuthNotReadyError","ApiNotConfiguredError"]);function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var At={makeWebCall:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!this.t)throw new Ct.AuthNotReadyError("The API helper cannot be used from this context. This probably means that you are attemping to use it inside your iframe connector, but outside a capability handler. For more, http://developers.trello.com/v1.0/reference#api-client-availability.");if("function"!=typeof this.t[t])throw new Ct.AuthNotReadyError("This method cannot be used in this context. This probably means that you are attemping to use it inside your iframe connector, but outside a capability handler. For more, http://developers.trello.com/v1.0/reference#api-client-availability.");return(e=this.t)[t].apply(e,function(t){if(Array.isArray(t))return St(t)}(r=n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return St(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?St(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},registerMessageHandler:function(t){var e=this;return new(n())((function(r,n){var o,i;o=setInterval((function(){t&&t.closed&&(clearInterval(o),n(new Ct.AuthDeniedError))}),500);var s=function(e){e.origin===window.location.origin&&e.source===t&&(i(),e.source.close(),e.data?r(e.data):n(new Ct.AuthDeniedError))},a=function(t){t.key===e.tokenStorageKey&&(i(),e.fetchAndStoreToken().then((function(t){t?r(t):n(new Ct.AuthDeniedError)})))};i=function(){window.removeEventListener("storage",a,!1),window.removeEventListener("message",s,!1),clearInterval(o)},window.addEventListener("message",s,!1),window.addEventListener("storage",a,!1)}))},storeToken:function(t){return this.makeWebCall("set",["member","private",this.tokenStorageKey,t]).then((function(){return t}))},checkForToken:function(){var t;try{t=this.localStorage.getItem(this.tokenStorageKey)}catch(t){}return t||null},fetchAndStoreToken:function(){var t=this,e=this.checkForToken();return e?this.storeToken(e).then((function(){return t.localStorage.removeItem(t.tokenStorageKey),e})):n().resolve(null)},getToken:function(){var t=this;return this.fetchAndStoreToken().then((function(e){return e||t.makeWebCall("get",["member","private",t.tokenStorageKey])}))},clearToken:function(){try{this.localStorage.removeItem(this.tokenStorageKey)}catch(t){}return this.makeWebCall("remove",["member","private",this.tokenStorageKey])},popupConfig:function(){var t=window.screenX+(window.outerWidth-550)/2,e=window.screenY+(window.outerHeight-725)/2;return"width=".concat(550,",height=").concat(725,",left=").concat(t,",top=").concat(e)},showAuthPopup:function(t){var e=t.expiration,r=void 0===e?"never":e,n=t.scope,o=void 0===n?"read":n,i=t.returnUrl,s=void 0===i?null:i,a={name:this.appName,key:this.appKey,expiration:r,scope:o,callback_method:"fragment",response_type:"fragment"};a.return_url=s||window.location.href;var c="".concat(this.authBase(),"/authorize?");return c+=Object.keys(a).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(a[t]))})).join("&"),window.open(c,"authpopup",this.popupConfig())},authorize:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new(n())((function(r,n){var o=t.showAuthPopup(e);t.getToken().then((function(t){t&&(o.close(),r(t))})),t.registerMessageHandler(o).then(r).catch(n)})).then((function(e){return t.storeToken(e)}))},isAuthorized:function(){return this.getToken().then((function(t){return!!t}))},checkAndStoreToken:function(){var t=window.location.hash.match(/token=(.+)?/);if(t&&2===t.length){var e=t[1]||"";try{this.localStorage.setItem(this.tokenStorageKey,e)}catch(t){}try{window.opener&&window.opener.postMessage(e,window.location.origin)}catch(t){}window.setTimeout((function(){return window.close()}),500)}else this.fetchAndStoreToken()}};const xt=At;function Ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ot=function(){function t(e){var r=e.t,n=e.appKey,o=e.appName,i=e.apiOrigin,s=void 0===i?"https://api.trello.com":i,a=e.authOrigin,c=void 0===a?"https://trello.com":a,u=e.localStorage,l=void 0===u?window.localStorage:u,f=e.tokenStorageKey,h=void 0===f?"trello_token":f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.appKey=n,this.appName=o,this.apiOrigin=s,this.authOrigin=c,this.t=r,this.localStorage=l,this.tokenStorageKey=h}var e,r;return e=t,(r=[{key:"init",value:function(){this.checkAndStoreToken()}},{key:"apiBase",value:function(){return"".concat(this.apiOrigin,"/1")}},{key:"authBase",value:function(){return"".concat(this.authOrigin,"/1")}}])&&Ft(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.keys(xt).forEach((function(t){Ot.prototype[t]=xt[t]}));var Rt=function(){function t(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handlers={},this.io=null,this.NotHandled=e().NotHandled,this.options=o,o.Sentry&&o.Sentry.configureScope((function(t){t.setTag("powerupjs_version","1.23.2")}));var i=this;Object.keys(r).forEach((function(t){i.handlers[t]=function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];var s=this;return n().try((function(){return r[t].apply(s,o)})).then(lt)}})),this.handlers.callback=function(t,e){return Y.callback.call(this,t,e,lt)},["requestWithContext","getAll","get","set","remove","safe","localizeKey","localizeKeys","localizeNode","board","cards","lists","member","organization"].forEach((function(t){K()(kt,t)&&(i[t]=kt[t])}))}var r,o;return r=t,(o=[{key:"connect",value:function(){var t=this,e=this,r=Et(this.handlers,tt()(this.options,{hostHandlers:tt()(kt,{getRestApi:function(){if(!e.restApi)throw new Ct.ApiNotConfiguredError("To use the API helper, make sure you specify appKey and appName when you call TrelloPowerup.initialize. For more, https://developers.trello.com/v1.0/reference#rest-api.");return e.restApi.t=this,e.restApi}})}));return this.io=r,r.request("initialize",Object.keys(this.handlers)).then((function(e){return r.secret=e.secret,window.locale=e.locale||"en",t.options.Sentry&&"object"===Pt(e)&&t.options.Sentry.configureScope((function(t){t.setTag("locale",window.locale),t.setTag("trello_version",e.version||"unknown"),e.member&&t.setUser({id:e.member})})),q(window.locale,t.options).then((function(){return r.request("ready")}))})).then((function(){return r}))}},{key:"initApi",value:function(){var t=this;if(this.options.appKey&&this.options.appName)return this.restApi=new Ot({t:this,appKey:this.options.appKey,appName:this.options.appName,apiOrigin:this.options.apiOrigin,authOrigin:this.options.authOrigin,localStorage:this.options.localStorage,tokenStorageKey:this.options.tokenStorageKey}),void this.connect().tap((function(){return t.restApi.init()}));(this.options.appKey||this.options.appName)&&Q("Both appKey and appName must be included to use the API. See more https://developers.trello.com/v1.0/reference#rest-api."),this.connect()}},{key:"request",value:function(t,e){return this.io.request(t,e)}},{key:"init",value:function(){this.initApi()}}])&&Tt(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();Rt.prototype.NotHandled=e().NotHandled;const Dt=Rt;o(688);var It=o(197);const Bt="data-theme",Nt="data-color-mode",Mt={light:()=>o.e(334).then(o.bind(o,750)),dark:()=>o.e(903).then(o.bind(o,821)),"legacy-light":()=>o.e(25).then(o.bind(o,649)),"legacy-dark":()=>o.e(214).then(o.bind(o,806)),spacing:()=>o.e(436).then(o.bind(o,495)),typography:()=>o.e(211).then(o.bind(o,381)),shape:()=>o.e(210).then(o.bind(o,512))},Ut=["light","dark","legacy-light","legacy-dark","spacing","typography","shape"],qt=["light","dark","spacing","typography"],zt="undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)");let Lt=function(){};const Ht="auto",Wt="dark",Vt="light",$t=function(t){document.documentElement.setAttribute(Nt,t.matches?"dark":"light")},Kt=({colorMode:t=Ht,dark:e=Wt,light:r=Vt,spacing:n,typography:o}={})=>{const i=(s={dark:e,light:r,spacing:n,typography:o},Object.entries(s).reduce(((t,[e,r])=>{return"colorMode"!==e&&(o=e,void 0===qt.find((t=>t===o)))||(n=r,void 0===Ut.find((t=>t===n))&&!["light","dark","auto"].includes(r))?t:t+""+(t?" ":"")+`${e}:${r}`;var n,o}),""));var s;return{[Bt]:i,[Nt]:"auto"===t?"light":t}},Qt=async({colorMode:t=Ht,dark:e=Wt,light:r=Vt,spacing:n,typography:o}={})=>{const i=new Set([e,r,n,o]);await Promise.all([...i].filter((t=>void 0!==t)).map((async t=>await(async t=>{if(document.head.querySelector(`style[${Bt}="${t}"]`))return;const e=await(async t=>{const{default:e}=await Mt[t]();return e})(t),r=document.createElement("style");r.textContent=e,r.dataset.theme=t,document.head.appendChild(r)})(t)))),"auto"===t&&zt?(t=zt.matches?"dark":"light",Lt=(0,It.ak)(zt,{type:"change",listener:$t})):Lt();const s=Kt({colorMode:t,dark:e,light:r,spacing:n,typography:o});return Object.entries(s).forEach((([t,e])=>{document.documentElement.setAttribute(t,e)})),Lt};var Jt=null;const Gt=function(t,e){if(!Jt)try{Jt=JSON.parse(decodeURIComponent(window.location.hash.replace(/^#/,"")))}catch(t){Q("Power-Up unable to parse url hash, perhaps you needed a t.signUrl(url)?",t),Jt={}}return K()(Jt,t)?Jt[t]:e};function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.io=null,this.args=[{context:Gt("context",e.context),secret:Gt("secret",e.secret)}].concat(Gt("args")),this.secret=Gt("secret",e.secret),this.options=e,window.locale=Gt("locale","en"),this.i18nPromise=q(window.locale,e),this.secret||(Q("Power-Up iframe initialized without a secret. Requests to Trello will not work."),Q("If this is an attachment-section or card-back-section make sure you call t.signUrl on the urls you provide."))}var e,r;return e=t,(r=[{key:"init",value:function(){this.initSentry(),this.initApi(),this.connect(),this.initColorThemeChangeListener()}},{key:"connect",value:function(){var t={callback:function(t,e){return Y.callback.call(this,t,e,lt)}};this.io=Et(t,tt()(this.options,{secret:Gt("secret"),hostHandlers:kt}))}},{key:"request",value:function(t,e){return this.io.request(t,e)}},{key:"render",value:function(t){if("function"!=typeof t)throw new TypeError("Argument passed to render must be a function");var e=this;e.onMessage&&window.removeEventListener("message",e.onMessage,!1),e.onMessage=function(r){r.source===window.parent&&"render"===r.data&&e.i18nPromise.then((function(){t()}))},window.addEventListener("message",e.onMessage,!1)}},{key:"initApi",value:function(){this.options.appKey&&this.options.appName?(this.restApi=new Ot({t:this,appKey:this.options.appKey,appName:this.options.appName,apiOrigin:this.options.apiOrigin,authOrigin:this.options.authOrigin,localStorage:this.options.localStorage,tokenStorageKey:this.options.tokenStorageKey}),this.restApi.init()):(this.options.appKey||this.options.appName)&&Q("Both appKey and appName must be included to use the API. See more at https://developers.trello.com/v1.0/reference#rest-api.")}},{key:"getRestApi",value:function(){if(!this.restApi)throw new Ct.ApiNotConfiguredError("To use the API helper, make sure you specify appKey and appName when you call TrelloPowerUp.iframe. See more at https://developers.trello.com/v1.0/reference#rest-api");return this.restApi}},{key:"initSentry",value:function(){if(this.options.Sentry){var t=Gt("context",this.options.context);this.options.Sentry.configureScope((function(e){e.setTag("locale",Gt("locale","en")),e.setTag("powerupjs_version","1.23.2"),t&&"object"===Xt(t)&&(e.setTag("trello_version",t.version||"unknown"),t.member&&e.setUser({id:t.member}),t.board&&e.setTag("idBoard",t.board),t.permissions&&Object.keys(t.permissions).forEach((function(r){e.setExtra("".concat(r,"_permission"),t.permissions[r])})))}))}}},{key:"initColorThemeChangeListener",value:function(){var t=this;window.addEventListener("message",(function(e){if(e.source===window.parent&&void 0!==e.data.theme){var r=e.data.theme;if(null===r){var n=document.documentElement;n.removeAttribute("data-theme"),n.removeAttribute("data-color-mode")}else Qt({colorMode:r});t.args[0].context.theme=r}}),!1)}}])&&Yt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();for(var te in Zt.prototype.NotHandled=e().NotHandled,kt)K()(kt,te)&&(Zt.prototype[te]=kt[te]);const ee=Zt;function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}o(611);const ne=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.version="1.23.2",this.CallbackCache=Y,this.PostMessageIO=e(),this.Promise=n(),this.util={colors:{getHexString:u,namedColorStringToHex:l},convert:{bytesToHexString:f,hexStringToUint8Array:h},crypto:S,initLocalizer:q,i18n:{localizeKey:L,localizeKeys:H,localizeNode:W},makeErrorEnum:T,relativeUrl:V},this.restApiError=Ct,this.initialize=this.initialize.bind(this),this.iframe=this.iframe.bind(this)}var r,o;return r=t,(o=[{key:"initialize",value:function(t,e){return null!=this.iframeConnector&&Q("Cannot call TrelloPowerUp.initialize() from a secondary iframe where you have already called TrelloPowerUp.iframe(). TrelloPowerUp.initialize() should only be called from your index connector page, and should not include a call to TrelloPowerUp.iframe()"),null!=this.indexConnector?(Q("Warning: calling TrelloPowerUp.initialize() more than once will have no effect. It is expected that you call it only once on your index connector."),this.indexConnector):(this.indexConnector=new Dt(t,e),this.indexConnector.init(),this.indexConnector)}},{key:"iframe",value:function(t){return null!=this.indexConnector&&Q("Cannot call TrelloPowerUp.iframe() from your index connector where you call TrelloPowerUp.initialize(). TrelloPowerUp.iframe() is only used for secondary iframes you may create or request from Trello during the Power-Up lifecycle."),null!=this.iframeConnector||(this.iframeConnector=new ee(t),this.iframeConnector.init()),this.iframeConnector}}])&&re(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();window.TrelloPowerUp=new ne})(),i})()));
//# sourceMappingURL=power-up.min.js.map